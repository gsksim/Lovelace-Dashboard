wallpanel:
  enabled: true
  hide_toolbar: true
  hide_sidebar: true
  fullscreen: true
  idle_time: 0
views:
  - title: Home
    path: home
    icon: ''
    theme: clear-dark
    type: panel
    layout: {}
    badges: []
    cards:
      - type: custom:layout-card
        layout_type: custom:grid-layout
        layout:
          grid-template-columns: auto 0.01px 25%
          grid-template-rows: auto
          grid-template-areas: |
            "main . sidebar"
        cards:
          - type: vertical-stack
            cards:
              - type: custom:stack-in-card
                card_mod:
                  style: |
                    ha-card {
                      background: linear-gradient(to top, #000066 0%, #660066 100%);
                      border-style: solid;
                      border-width: 0px;
                      border-radius: 20px;
                      --ha-card-border-color: rgba(0,0,0,0);
                      --ha-card-box-shadow: rgba(0,0,0,0);
                    }
                keep:
                  background: true
                  box_shadow: true
                  margin: true
                  outer_padding: true
                  border_radius: true
                cards:
                  - type: markdown
                    style:
                      .: |
                        ha-markdown.no-header {
                          padding-top: 0px !important; 
                          }
                        ha-markdown {
                          padding: 0px 0px 0px !important; 
                          }
                        ha-card {
                          border-radius: 20px;
                          overflow: hidden;
                          margin: 0 auto;

                          background: none;
                          box-shadow: none;

                        }
                      ha-markdown:
                        $: |
                          td, th {
                            word-wrap: break-word;
                            border-spacing: 0px;
                            
                                margin-left:auto; 
                                margin-right:auto;

                          }
                          table {
                            border-spacing: 0px;
                                margin-left:auto; 
                                margin-right:auto;
                          }
                    content: >-
                      <table >
                        <tr>
                          <td width="10%" ><img src="/local/tileboard/images/HA2.png" alt="" border=3 height=90 width=115 ></img></td>
                          <td width="85%"><font size=5><b>{{now().strftime("%I:%M %p")}}</b></font><br><font size=3> {{now().strftime("%A")}}, {{now().strftime("%B %-d")}} </font></td>
                          <td><font size=6><b>{{state_attr("weather.home_assistant", "temperature")}}Â°C</b></font><br><font size=4>{{states.weather.home_assistant.state}}  </font></td>
                        </tr>
                      </table>

                      
                  - type: horizontal-stack
                    card_mod:  
                      style: |
                        ha-card {
                          height: 100% !important;
                          background: none;
                          box-shadow: none;
                        }
                    cards:
                      - type: button
                        tap_action:
                          action: navigate
                          navigation_path: home
                        show_name: true
                        show_icon: false
                        name: Home
                        card_mod:
                          style: |
                            ha-card {
                              font-weight: bold;
                              height: 100% !important;
                              background-color:rgba(115, 125, 140, 0.7);
                              box-shadow: 0 4px 8px 0 rgba(0, 0, 0, 0.2), 0 6px 20px 0 rgba(0, 0, 0, 0.19);
                              --ha-card-border-color: rgba(0,0,0,0);
                            }
                      - type: button
                        tap_action:
                          action: navigate
                          navigation_path: camera
                        show_name: true
                        show_icon: false
                        name: Camera
                        card_mod:
                          style: |
                            ha-card {
                              font-weight: bold;
                              height: 100% !important;
                              background-color:rgba(115, 125, 140, 0.5);
                              box-shadow: 0 4px 8px 0 rgba(0, 0, 0, 0.2), 0 6px 20px 0 rgba(0, 0, 0, 0.19);
                              --ha-card-border-color: rgba(0,0,0,0);
                            }
                      - type: button
                        tap_action:
                          action: navigate
                          navigation_path: garden
                        show_name: true
                        show_icon: false
                        name: Garden
                        card_mod:
                          style: |
                            ha-card {
                              font-weight: bold;
                              height: 100% !important;
                              background-color:rgba(115, 125, 140, 0.5);
                              box-shadow: 0 4px 8px 0 rgba(0, 0, 0, 0.2), 0 6px 20px 0 rgba(0, 0, 0, 0.19);
                              --ha-card-border-color: rgba(0,0,0,0);
                            }
                      - type: button
                        tap_action:
                          action: navigate
                          navigation_path: media
                        show_name: true
                        show_icon: false
                        name: Media
                        card_mod:
                          style: |
                            ha-card {
                              font-weight: bold;
                              height: 100% !important;
                              background-color:rgba(115, 125, 140, 0.5);
                              box-shadow: 0 4px 8px 0 rgba(0, 0, 0, 0.2), 0 6px 20px 0 rgba(0, 0, 0, 0.19);
                              --ha-card-border-color: rgba(0,0,0,0);
                            }
                      - type: button
                        tap_action:
                          action: navigate
                          navigation_path: system
                        show_name: true
                        show_icon: false
                        name: System
                        card_mod:
                          style: |
                            ha-card {
                              font-weight: bold;
                              height: 100% !important;
                              background-color:rgba(115, 125, 140, 0.5);
                              box-shadow: 0 4px 8px 0 rgba(0, 0, 0, 0.2), 0 6px 20px 0 rgba(0, 0, 0, 0.19);
                              --ha-card-border-color: rgba(0,0,0,0);
                            }
              - type: custom:stack-in-card
                card_mod:
                  style: |
                    ha-card {
                      background-color: #000066;
                      border-style: solid;
                      border-width: 0px;
                      border-radius: 20px;
                      height: 615px;
                      --ha-card-box-shadow: rgba(0,0,0,0);
                    }
                keep:
                  background: true
                  box_shadow: true
                  margin: true
                  outer_padding: true
                  border_radius: true
                cards:
                  - type: grid
                    cards:
                      - type: custom:swipe-card
                        card_mod:
                          style: |
                            ha-card {
                              height: 100% !important;
                              background: none;
                              box-shadow: none;
                              --ha-card-border-color: rgba(0,0,0,0);
                            }
                        reset_after: 60
                        cards:
                          - type: custom:mini-graph-card
                            card_mod:
                              style: |
                                ha-card {
                                  height: 100% !important;
                                  background: none;
                                  box-shadow: none;
                                  --ha-card-border-color: rgba(0,0,0,0);
                                }
                            entities:
                              - entity: sensor.nest_temperature
                                name: 'Indoor'
                            show:
                              labels: true
                              points: false
                            color_thresholds:
                              - value: 24
                                color: '#f39c12'
                              - value: 26
                                color: '#d35400'
                              - value: 28
                                color: '#c0392b'
                          - type: custom:mini-graph-card
                            card_mod:
                              style: |
                                ha-card {
                                  height: 100% !important;
                                  background: none;
                                  box-shadow: none;
                                  --ha-card-border-color: rgba(0,0,0,0);
                                }
                            entities:
                              - entity: sensor.tele_temperature
                                name: 'Garage'
                            show:
                              labels: true
                              points: false
                            color_thresholds:
                              - value: 24
                                color: '#f39c12'
                              - value: 26
                                color: '#d35400'
                              - value: 28
                                color: '#c0392b'
                          - type: custom:mini-graph-card
                            card_mod:
                              style: |
                                ha-card {
                                  height: 100% !important;
                                  background: none;
                                  box-shadow: none;
                                  --ha-card-border-color: rgba(0,0,0,0);
                                }
                            entities:
                              - entity: sensor.temperature_humidity_sensor_950d_temperature
                                name: 'Guest Bedroom'
                            show:
                              labels: true
                              points: false
                            color_thresholds:
                              - value: 24
                                color: '#f39c12'
                              - value: 26
                                color: '#d35400'
                              - value: 28
                                color: '#c0392b'
                          - type: custom:mini-graph-card
                            card_mod:
                              style: |
                                ha-card {
                                  height: 100% !important;
                                  background: none;
                                  box-shadow: none;
                                  --ha-card-border-color: rgba(0,0,0,0);
                                }
                            entities:
                              - entity: sensor.temperature_humidity_sensor_89de_temperature
                                name: 'Corner Bedroom'
                            show:
                              labels: true
                              points: false
                            color_thresholds:
                              - value: 24
                                color: '#f39c12'
                              - value: 26
                                color: '#d35400'
                              - value: 28
                                color: '#c0392b'
                          - type: custom:mini-graph-card
                            card_mod:
                              style: |
                                ha-card {
                                  height: 100% !important;
                                  background: none;
                                  box-shadow: none;
                                  --ha-card-border-color: rgba(0,0,0,0);
                                }
                            entities:
                              - entity: sensor.masterbedcond_sht3x_temperature
                                name: 'Master Bedroom'
                            show:
                              labels: true
                              points: false
                            color_thresholds:
                              - value: 24
                                color: '#f39c12'
                              - value: 26
                                color: '#d35400'
                              - value: 28
                                color: '#c0392b'
                          - type: custom:mini-graph-card
                            card_mod:
                              style: |
                                ha-card {
                                  height: 100% !important;
                                  background: none;
                                  box-shadow: none;
                                  --ha-card-border-color: rgba(0,0,0,0);
                                }
                            entities:
                              - entity: sensor.server_temperature
                                name: 'Server'
                            show:
                              labels: true
                              points: false
                            color_thresholds:
                              - value: 24
                                color: '#f39c12'
                              - value: 26
                                color: '#d35400'
                              - value: 28
                                color: '#c0392b'
                      - type: custom:swipe-card
                        card_mod:
                          style: |
                            ha-card {
                              height: 100% !important;
                              background: none;
                              box-shadow: none;
                              --ha-card-border-color: rgba(0,0,0,0);
                            }
                        reset_after: 60
                        cards:
                          - type: custom:mini-graph-card
                            card_mod:
                              style: |
                                ha-card {
                                  height: 100% !important;
                                  background: none;
                                  box-shadow: none;
                                  border-radius: 0px;
                                  --ha-card-border-color: rgba(0,0,0,0);
                                }
                            entities:
                              - entity: sensor.tv_on_today
                            name: Television
                            hours_to_show: 168
                            aggregate_func: max
                            group_by: date
                            show:
                              graph: bar
                          - type: custom:mini-graph-card
                            card_mod:
                              style: |
                                ha-card {
                                  height: 100% !important;
                                  background: none;
                                  box-shadow: none;
                                  border-radius: 0px;
                                  --ha-card-border-color: rgba(0,0,0,0);
                                }
                            entities:
                              - entity: sensor.hvac_on_today
                            name: Furnace
                            hours_to_show: 168
                            aggregate_func: max
                            group_by: date
                            show:
                              graph: bar
                      - type: custom:mini-graph-card
                        card_mod:
                          style: |
                            ha-card {
                              height: 100% !important;
                              background: none;
                              box-shadow: none;
                              --ha-card-border-color: rgba(0,0,0,0);
                            }
                        icon: mdi:molecule-co2
                        
                        entities:
                          - sensor.co2_sensor
                            
                        show:
                          labels: true
                        color_thresholds:
                          - value: 600
                            color: "#009900"
                          - value: 601
                            color: "#FF9900"
                          - value: 901
                            color: "#FF0000"

                    columns: 3
                    square: false
                  - type: custom:gap-card
                    height: 10
                    size: null
                  - type: grid
                    cards:
                      - type: custom:homekit-card
                        style: |
                          .row {
                            padding-top: 0px !important; 
                              }
                          :host {
                          --tile-background: rgba(48, 167, 205, 91%);
                          --tile-on-background: rgba(196, 205, 48, 91%);
                          --tile-border-radius: 12px;
                          --tile-width: 100px;
                          --tile-height: 100px;
                          --tile-name-text-color: var(--text-color);
                          --tile-on-name-text-color: var(--text-medium-color);
                          --tile-state-text-color: var(--text-light-color);
                          --tile-on-state-text-color: var(--text-medium-color);
                          --tile-state-changed-text-color: var(--text-color);
                          --tile-unavailable-state-text-color: var(--disabled-text-color);
                          --tile-value-text-color: var(--text-color);
                          --tile-icon-color: rgba(0, 0, 0, 54%);
                          --tile-on-icon-color: var(--accent-color);
                          --tile-width-mobile: 90px;
                          --tile-height-mobile: 90px;
                          --min-header-height: 0px;
                          --tile-icon-size: 40px;
                          --tile-image-radius: 100%
                          --slider-width: 120px;
                          --slider-height: 120px;
                          }
                        home: false
                        useBrightness: true
                        horizontalScroll: true
                        useTemperature: false
                        useRGB: true
                        titleColor: var(--text-medium-color)
                        enableColumns: true
                        statePositionTop: true
                        masonry: true
                        rows:
                          - row: 1
                            columns:
                              - column: 1
                                tileOnRow: 8
                                entities:
                                  - title: Outdoor
                                    popup:
                                      type: custom:light-popup-card
                                      brightnessWidth: 130px
                                      brightnessHeight: 350px
                                      switchWidth: 110px
                                      switchHeight: 300px
                                    entities:
                                      - entity: switch.front_outdoor
                                        name: Outdoor
                                        icon: mdi:coach-lamp-variant
                                      - entity: switch.front_potlights
                                        name: Front Potlights
                                        icon: mdi:lightbulb
                                      - entity: switch.backyard
                                        name: Backyard Light
                                        icon: mdi:outdoor-lamp
                                      - entity: switch.backpotlights
                                        name: Back Potlights
                                        icon: mdi:lightbulb
                                      - entity: light.outdoor_lights
                                        name: Outdoor Lights  
                                        hide: >
                                          [[[ if (states['switch.front_outdoor'].state == "on") return false; 
                                            else return true  ]]]       
                          - row: 2
                            columns:
                              - column: 1
                                tileOnRow: 8
                                entities:
                                  - title: Indoor
                                    popup:
                                      type: custom:light-popup-card
                                      brightnessWidth: 130px
                                      brightnessHeight: 350px
                                      switchWidth: 110px
                                      switchHeight: 300px
                                    entities:
                                      - entity: switch.front_light
                                        name: Entrance
                                        icon: mdi:ceiling-light         
                                      - entity: switch.living_room_light
                                        name: Living Room                          
                                      - entity: light.smartdimmer2
                                        name: Family Room
                                      - entity: switch.garage_light
                                        name: Garage
                                        icon: mdi:track-light
                                      - entity: light.tv_back_led_strip
                                        name: TV Back Light
                                        icon: mdi:television-ambient-light
                                      - entity: switch.smart_switch_1
                                        name: Tree
                                        icon: mdi:pine-tree
                                        hide:  "[[[ return entity.state == 'unknown'; ]]]"
                      - type: 'custom:button-card'
                        name: >-
                            [[[ 
                                if (states['sensor.garbage_date_count'].state == 'today') 
                                return "Today is waste collection day, remember to keep " + states['calendar.waste_collection'].attributes.message + " bins on street" ;
                                if (states['sensor.garbage_date_count'].state == 'tomorrow') 
                                return "Tomorrow is waste collection day, remember to keep " + states['calendar.waste_collection'].attributes.message + " bins on street" ;
                                else return '';
                            ]]]
                        show_name: true
                        styles:
                          card:
                            - padding: 1px
                          name:
                            - justify-self: start
                            - padding-left: 30px
                            - font-weight: bold
                            - text-transform: Capitalize
                            - color: rgb(196, 205, 48)
                        card_mod:
                          style: |
                            ha-card {
                              max-width: 100%;
                              height: 100% !important;
                              background-color:rgba(115, 125, 140, 0);
                              border-color: #000066;
                              margin-left: auto;
                              margin-right: auto;
                              --ha-card-box-shadow: rgba(0,0,0,0);
                            }
                    columns: 1
                    square: false
            view_layout:
              grid-area: main
          - type: vertical-stack
            cards:
              - type: custom:stack-in-card
                card_mod:
                  style: |
                    ha-card {
                      background-color: #000066;
                      border-style: solid;
                      border-width: 0px;
                      border-radius: 20px;
                      height: 163px;
                      --ha-card-border-color: rgba(0,0,0,0);
                      --ha-card-box-shadow: rgba(0,0,0,0);
                    }
                keep:
                  background: true
                  box_shadow: true
                  margin: true
                  outer_padding: true
                  border_radius: true
                cards:
                  - type: custom:gap-card
                    height: 10
                    size: null
                  - type: horizontal-stack
                    card_mod:  
                      style: |
                        ha-card {
                          height: 100% !important;
                          background: none;
                          box-shadow: none;
                          border-color: #000066;
                          --ha-card-box-shadow: rgba(0,0,0,0);
                          margin: auto;
                        }
                    cards:
                      - type: 'custom:button-card'
                        size: 70%
                        show_name: false
                        icon: mdi:cctv
                        styles:
                          icon:
                            - color: rgb(0, 179, 134)
                        tap_action:
                          action: fire-dom-event
                          browser_mod:
                            command: call-service
                            service: browser_mod.popup
                            data:      
                              browser_id: THIS                    
                              size: fullscreen
                              autoclose: true
                              timeout: 60000
                              content:
                                type: grid
                                cards:
                                  - type: picture-entity
                                    entity: camera.driveway
                                    show_name: false
                                    show_state: false
                                    camera_view: live
                                    camera_image: camera.driveway
                                  - type: picture-entity
                                    entity: camera.front_porch
                                    show_name: false
                                    show_state: false
                                    camera_view: live
                                    camera_image: camera.front_porch
                                  - type: picture-entity
                                    entity: camera.side_entrance
                                    show_name: false
                                    show_state: false
                                    camera_view: live
                                    camera_image: camera.side_entrance
                                  - type: picture-entity
                                    entity: camera.backyard
                                    show_name: false
                                    show_state: false
                                    camera_view: live
                                    camera_image: camera.backyard
                                columns: 2
                                square: false
                              card_mod:
                                style:
                                  .: |
                                    :host {
                                      --ha-card-background: #000066;
                                      --ha-card-border-color: #000066;
                                      --ha-card-box-shadow: rgba(0,0,0,0);
                                      --mdc-dialog-scrim-color: rgba(255,255,255,0.5);
                                      --mdc-dialog-min-height: 0%;
                                      --mdc-dialog-min-width: 100%;
                                      --mdc-dialog-max-width: 100%;      
                                      --mdc-button.background-color: rgb(255, 173, 51);                                
                                    }
                        card_mod:
                          style: |
                            ha-card {
                              max-width: 130px;
                              height: 100% !important;
                              background-color:rgba(115, 125, 140, 0);
                              border-color: #000066;
                              margin-left: auto;
                              margin-right: auto;
                              --ha-card-box-shadow: rgba(0,0,0,0); 
                            }
                      - type: 'custom:button-card'
                        size: 60%
                        show_name: false
                        icon: mdi:car
                        styles:
                          icon:
                            - color: rgb(0, 179, 134)
                        tap_action:
                          action: fire-dom-event
                          browser_mod:
                            command: call-service
                            service: browser_mod.popup
                            data:      
                              browser_id: THIS                    
                              content:
                                type: picture-elements
                                image: /local/tileboard/images/RRS_HST2.jpg
                                style: |
                                  #root > hui-image {
                                    display: block;
                                    width: 100%;
                                    top: 10px;
                                    padding: 0px 0px 30px 0px;
                                    margin: auto;
                                  }
                                elements:
                                  - type: image
                                    image: /local/tileboard/images/bg2h.png
                                    style:
                                      left: 50%
                                      top: 90%
                                      width: 100%
                                      height: 60px
                                  - type: state-icon
                                    entity: lock.2020_range_rover_sport_doors
                                    tap_action:
                                      action: more-info
                                    style:
                                      color: white
                                      left: 15%
                                      top: 86%
                                  - type: state-label
                                    entity: lock.2020_range_rover_sport_doors
                                    style:
                                      color: white
                                      left: 15%
                                      top: 95%
                                  - type: state-icon
                                    entity: sensor.2020_range_rover_sport_windows
                                    tap_action:
                                      action: more-info
                                    style:
                                      color: white
                                      left: 38.3%
                                      top: 86%
                                  - type: state-label
                                    entity: sensor.2020_range_rover_sport_windows
                                    style:
                                      color: white
                                      left: 38.3%
                                      top: 95%
                                  - type: state-icon
                                    entity: sensor.2020_range_rover_sport_range
                                    tap_action:
                                      action: more-info
                                    style:
                                      color: white
                                      left: 61.6%
                                      top: 86%
                                  - type: state-label
                                    entity: sensor.2020_range_rover_sport_range
                                    style:
                                      color: white
                                      left: 61.6%
                                      top: 95%
                                  - type: state-icon
                                    entity: sensor.2020_range_rover_sport_info
                                    tap_action:
                                      action: more-info
                                    style:
                                      color: white
                                      left: 85%
                                      top: 86%
                                  - type: state-label
                                    entity: sensor.2020_range_rover_sport_info
                                    attribute: Odometer
                                    style:
                                      color: white
                                      left: 85%
                                      top: 95%
                        card_mod:
                          style: |
                            ha-card {
                              max-width: 130px;
                              height: 100% !important;
                              background-color:rgba(115, 125, 140, 0);
                              border-color: #000066;
                              margin-left: auto;
                              margin-right: auto;
                              --ha-card-box-shadow: rgba(0,0,0,0);
                            }

              - type: custom:stack-in-card
                card_mod:
                  style: |
                    ha-card {
                      background-color: #000066;
                      border-style: solid;
                      border-width: 0px;
                      border-radius: 20px;
                      height: 615px;
                      --ha-card-border-color: rgba(0,0,0,0);
                      --ha-card-box-shadow: rgba(0,0,0,0);
                    }
                keep:
                  background: true
                  box_shadow: true
                  margin: true
                  outer_padding: true
                  border_radius: true
                cards:
                  - type: horizontal-stack
                    card_mod:  
                      style: |
                        ha-card {
                          height: 100% !important;
                          background: none;
                          box-shadow: none;
                        }
                    cards:
                      - type: 'custom:button-card'
                        entity: cover.double
                        size: 90%
                        show_name: false
                        icon: >
                                [[[
                                  if (entity.state == 'open') return 'mdi:garage-open';
                                  if (entity.state == 'closed') return 'mdi:garage';
                                  else return 'mdi:garage-alert';
                                ]]]
                        styles:
                          icon:
                            - color: >
                                [[[
                                  if (entity.state == 'closed') return 'rgb(0, 179, 134)';
                                  if (entity.state == 'open') return 'rgb(255, 102, 102)';
                                  else return 'rgb(255, 173, 51)';
                                ]]]
                        card_mod:
                          style: |
                            ha-card {
                              max-width: 130px;
                              height: 100% !important;
                              background-color:rgba(115, 125, 140, 0);
                              border-color: #000066;
                              margin-left: auto;
                              margin-right: auto;
                              --ha-card-box-shadow: rgba(0,0,0,0); 
                            }
                      - type: 'custom:button-card'
                        entity: cover.single
                        size: 90%
                        show_name: false
                        icon: >
                                [[[
                                  if (entity.state == 'open') return 'mdi:garage-open';
                                  if (entity.state == 'closed') return 'mdi:garage';
                                  else return 'mdi:garage-alert';
                                ]]]
                        styles:
                          icon:
                            - color: >
                                [[[
                                  if (entity.state == 'closed') return 'rgb(0, 179, 134)';
                                  if (entity.state == 'open') return 'rgb(255, 102, 102)';
                                  else return 'rgb(255, 173, 51)';
                                ]]]
                        card_mod:
                          style: |
                            ha-card {
                              max-width: 130px;
                              height: 100% !important;
                              background-color:rgba(115, 125, 140, 0);
                              border-color: #000066;
                              margin-left: auto;
                              margin-right: auto;
                              --ha-card-box-shadow: rgba(0,0,0,0);
                            }
                  - type: horizontal-stack
                    card_mod:  
                      style: |
                        ha-card {
                          height: 100% !important;
                          background: none;
                          box-shadow: none;
                        }
                    cards:
                      - type: 'custom:button-card'
                        size: 70%
                        name: System
                        show_name: false
                        icon: >
                                [[[
                                  
                                  if (states['alarm_control_panel.home_alarm'].state == 'disarmed') return 'mdi:security';

                                  if (states['alarm_control_panel.home_alarm'].state == 'armed_home') return 'mdi:shield-home';
                                  if (states['alarm_control_panel.home_alarm'].state == 'armed_away') return 'mdi:shield-airplane';
                                  if (states['alarm_control_panel.home_alarm'].state == 'triggered') return 'mdi:shield-alert';
                                  if (states['alarm_control_panel.home_alarm'].state == 'pending') return 'mdi:security';
                                  else return 'mdi:shield-off';
                                ]]] 
                        styles:
                          icon:
                            - color: >
                                [[[
                                  if (states['alarm_control_panel.home_alarm'].state == 'disarmed' && states['sensor.home_alarm_keypad'].state != 'Not Ready' ) return 'rgb(0, 179, 134)';
                                  if (states['alarm_control_panel.home_alarm'].state == 'disarmed' && states['sensor.home_alarm_keypad'].state == 'Not Ready' ) return 'rgb(255, 173, 51)';
                                  if (states['alarm_control_panel.home_alarm'].state == 'armed_home') return 'rgb(255, 102, 102)';
                                  if (states['alarm_control_panel.home_alarm'].state == 'armed_away') return 'rgb(255, 102, 102)';
                                  if (states['alarm_control_panel.home_alarm'].state == 'triggered') return 'rgb(255, 102, 102)';
                                  else return 'rgb(255, 173, 51)';
                                ]]]
                          card:
                            - animation: >
                                [[[
                                  if (states['alarm_control_panel.home_alarm'].state == 'pending')  return 'blink 2s ease infinite';
                                ]]]
                        tap_action:
                          action: fire-dom-event
                          browser_mod:
                            command: call-service
                            service: browser_mod.popup
                            data:      
                              browser_id: THIS                    
                              content:
                                type: alarm-panel
                                entity: alarm_control_panel.home_alarm
                              card_mod:
                                style:
                                  .: |
                                    :host {
                                      --ha-card-background: #000066;
                                      --ha-card-border-color: #000066;
                                      --ha-card-box-shadow: rgba(0,0,0,0);
                                      --mdc-dialog-scrim-color: rgba(255,255,255,0.5);
                                      --mdc-dialog-min-height: 0%;
                                      --mdc-dialog-min-width: 100%;
                                      --mdc-dialog-max-width: 100%;      
                                      --mdc-button.background-color: rgb(255, 173, 51);                                
                                    }
                        card_mod:
                          style: |
                            ha-card {
                              max-width: 130px;
                              height: 100% !important;
                              background-color:rgba(115, 125, 140, 0);
                              border-color: #000066;
                              margin-left: auto;
                              margin-right: auto;
                              --ha-card-box-shadow: rgba(0,0,0,0);
                            }
                      - type: 'custom:button-card'
                        entity: lock.front_door
                        size: 70%
                        show_name: false
                        icon: >
                                [[[
                                  if (entity.state == 'locked') return 'mdi:lock';
                                  if (entity.state == 'locked') return 'mdi:lock-alert';
                                  if (entity.state == 'unlocked') return 'mdi:lock-open';
                                  if (entity.state == 'unlocked') return 'mdi:lock-open-alert';
                                  else return 'mdi:lock-off';
                                ]]]
                        styles:
                          icon:
                            - color: >
                                [[[
                                  if (entity.state == 'locked') return 'rgb(0, 179, 134)';
                                  if (entity.state == 'locked') return 'rgb(255, 102, 102)';
                                  if (entity.state == 'unlocked') return 'rgb(255, 102, 102)';
                                  if (entity.state == 'unlocked') return 'rgb(255, 102, 102)';
                                  else return 'rgb(255, 173, 51)';
                                ]]]
                       #   grid:
                        #    - position: relative
                         # custom_fields:
                          #  notification:
                           #   - border-radius: 50%
                            #  - position: absolute
                             # - left: 70%
                             # - top: 10%
                              #- height: 25px
                              #- width: 25px
                              #- font-size: 12px
                              #- font-weight: bold
                              #- line-height: 20px
                       # custom_fields:
                        #  notification: >
                         #   [[[ return states['sensor.front_door_battery'].state + "%" ]]]
                        card_mod:
                          style: |
                            ha-card {
                              max-width: 130px;
                              height: 100% !important;
                              background-color:rgba(115, 125, 140, 0);
                              border-color: #000066;
                              margin-left: auto;
                              margin-right: auto;
                              --ha-card-box-shadow: rgba(0,0,0,0);
                            }

                  - type: horizontal-stack
                    card_mod:  
                      style: |
                        ha-card {
                          height: 100% !important;
                          background: none;
                          box-shadow: none;
                        }
                    cards:
                      - type: 'custom:button-card'
                        entity: binary_sensor.doors
                        size: 70%
                        show_name: false
                        icon: >
                                [[[
                                  if (entity.state == 'off') return 'mdi:door';
                                  if (entity.state == 'on') return 'mdi:door-open';
                                  else return 'mdi:door';
                                ]]]
                        styles:
                          icon:
                            - color: >
                                [[[
                                  if (entity.state == 'off') return 'rgb(0, 179, 134)';
                                  if (entity.state == 'on') return 'rgb(255, 102, 102)';
                                  else return 'rgb(169,169,169)';
                                ]]]
                          card:
                            - animation: >
                                [[[
                                  if (entity.state == 'on')  return 'blink 2s ease infinite';
                                ]]]
                        card_mod:
                          style: |
                            ha-card {
                              max-width: 130px;
                              height: 100% !important;
                              background-color:rgba(115, 125, 140, 0);
                              border-color: #000066;
                              margin-left: auto;
                              margin-right: auto;
                              --ha-card-box-shadow: rgba(0,0,0,0); 
                            }
                      - type: 'custom:button-card'
                        entity: binary_sensor.windows
                        size: 60%
                        show_name: false
                        icon: >
                                [[[
                                  if (entity.state == 'off') return 'mdi:window-closed-variant';
                                  if (entity.state == 'on') return 'mdi:window-open-variant';
                                  else return 'mdi:window-closed-variant';
                                ]]]
                        styles:
                          icon:
                            - color: >
                                [[[
                                  if (entity.state == 'off') return 'rgb(0, 179, 134)';
                                  if (entity.state == 'on') return 'rgb(255, 102, 102)';
                                  else return 'rgb(169,169,169)';
                                ]]]
                          card:
                            - animation: >
                                [[[
                                  if (entity.state == 'on')  return 'blink 2s ease infinite';
                                ]]]
                        card_mod:
                          style: |
                            ha-card {
                              max-width: 130px;
                              height: 100% !important;
                              background-color:rgba(115, 125, 140, 0);
                              border-color: #000066;
                              margin-left: auto;
                              margin-right: auto;
                              --ha-card-box-shadow: rgba(0,0,0,0);
                            }
                  - type: horizontal-stack
                    card_mod:  
                      style: |
                        ha-card {
                          height: 100% !important;
                          background: none;
                          box-shadow: none;
                        }
                    cards:
                      - type: 'custom:button-card'
                        entity: sensor.hvac_state
                        size: 70%
                        show_name: false
                        show_state: false
                        icon: mdi:fan
                        tap_action:
                          entity: climate.nest
                          action: more-info
                        state:
                          - value: 'Heat'
                            spin: true
                          - value: 'Cool'
                            spin: true
                        styles:
                          icon:
                            - color: >
                                [[[
                                  if (entity.state == 'Idle') return 'rgb(0, 179, 134)';
                                  if (entity.state == 'Heat') return 'rgb(255, 173, 51)';
                                  if (entity.state == 'Cool') return 'rgb(16, 137, 243)';
                                  else return 'rgb(169,169,169)';
                                ]]]
                          card:
                            - animation: >
                                [[[
                                  if (entity.state == 'unknown')  return 'blink 2s ease infinite';
                                ]]]
                        card_mod:
                          style: |
                            ha-card {
                              max-width: 130px;
                              height: 100% !important;
                              background-color:rgba(115, 125, 140, 0);
                              border-color: #000066;
                              margin-left: auto;
                              margin-right: auto;
                              --ha-card-box-shadow: rgba(0,0,0,0); 
                            }
                      - type: 'custom:button-card'
                        entity: switch.television
                        size: 70%
                        show_name: false
                        tap_action:
                          action: toggle
                        icon: >
                                [[[
                                  if (entity.state == 'off') return 'mdi:television-off';
                                  if (entity.state == 'on') return 'mdi:television-play';
                                  else return 'mdi:television';
                                ]]]
                        styles:
                          icon:
                            - color: >
                                [[[
                                  if (entity.state == 'off') return 'rgb(0, 179, 134)';
                                  if (entity.state == 'on') return 'rgb(196, 205, 48)';
                                  else return 'rgb(255, 173, 51)';
                                ]]]
                        card_mod:
                          style: |
                            ha-card {
                              max-width: 130px;
                              height: 100% !important;
                              background-color:rgba(115, 125, 140, 0);
                              border-color: #000066;
                              margin-left: auto;
                              margin-right: auto;
                              --ha-card-box-shadow: rgba(0,0,0,0);
                            }
                  - type: horizontal-stack
                    card_mod:  
                      style: |
                        ha-card {
                          height: 100% !important;
                          background: none;
                          box-shadow: none;
                        }
                    cards:
                      - type: 'custom:button-card'
                        entity: binary_sensor.internet 
                        size: 70%
                        show_name: false
                        icon: >
                                [[[
                                  if (entity.state == 'on') return 'mdi:check-network';
                                  if (entity.state == 'off') return 'mdi:close-network';
                                  else return 'mdi:server-network';
                                ]]]
                        styles:
                          icon:
                            - color: >
                                [[[
                                  if (entity.state == 'on') return 'rgb(0, 179, 134)';
                                  if (entity.state == 'off') return 'rgb(255, 102, 102)';
                                  else return 'rgb(169,169,169)';
                                ]]]
                          card:
                            - animation: >
                                [[[
                                  if (entity.state == 'off')  return 'blink 2s ease infinite';
                                ]]]
                        card_mod:
                          style: |
                            ha-card {
                              max-width: 130px;
                              height: 100% !important;
                              background-color:rgba(115, 125, 140, 0);
                              border-color: #000066;
                              margin-left: auto;
                              margin-right: auto;
                              --ha-card-box-shadow: rgba(0,0,0,0); 
                            }
                      - type: 'custom:button-card'
                        entity: switch.bell_disable
                        hold_action:
                          action: toggle
                        size: 70%
                        show_name: false
                        icon: >
                                [[[
                                  if (entity.state == 'on') return 'mdi:bell-off';
                                  if (entity.state == 'off') return 'mdi:bell-ring';
                                  else return 'mdi:bell';
                                ]]]
                        styles:
                          icon:
                            - color: >
                                [[[
                                  if (entity.state == 'off') return 'rgb(0, 179, 134)';
                                  if (entity.state == 'on') return 'rgb(255, 102, 102)';
                                  else return 'rgb(169,169,169)';
                                ]]]
                        card_mod:
                          style: |
                            ha-card {
                              max-width: 130px;
                              height: 100% !important;
                              background-color:rgba(115, 125, 140, 0);
                              border-color: #000066;
                              margin-left: auto;
                              margin-right: auto;
                              --ha-card-box-shadow: rgba(0,0,0,0); 
                            }
            view_layout:
              grid-area: sidebar
  - title: Camera
    path: camera
    icon: ''
    theme: clear-dark
    type: panel
    layout: {}
    badges: []
    cards:
      - type: custom:layout-card
        layout_type: custom:grid-layout
        layout:
          grid-template-columns: auto 0.01px 25%
          grid-template-rows: auto
          grid-template-areas: |
            "main . sidebar"
        cards:
          - type: vertical-stack
            cards:
              - type: custom:stack-in-card
                card_mod:
                  style: |
                    ha-card {
                      background: linear-gradient(to top, #000066 0%, #660066 100%);
                      border-style: solid;
                      border-width: 0px;
                      border-radius: 20px;
                      --ha-card-border-color: rgba(0,0,0,0);
                    }
                keep:
                  background: true
                  box_shadow: true
                  margin: true
                  outer_padding: true
                  border_radius: true
                cards:
                  - type: markdown
                    style:
                      .: |
                        ha-markdown.no-header {
                          padding-top: 0px !important; 
                          }
                        ha-markdown {
                          padding: 0px 0px 0px !important; 
                          }
                        ha-card {
                          border-radius: 20px;
                          overflow: hidden;
                          margin: 0 auto;

                          background: none;
                          box-shadow: none;

                        }
                      ha-markdown:
                        $: |
                          td, th {
                            word-wrap: break-word;
                            border-spacing: 0px;
                            
                                margin-left:auto; 
                                margin-right:auto;

                          }
                          table {
                            border-spacing: 0px;
                                margin-left:auto; 
                                margin-right:auto;
                          }
                    content: >-
                      <table >
                        <tr>
                          <td width="10%" ><img src="/local/tileboard/images/HA2.png" alt="" border=3 height=90 width=100 ></img></td>
                          <td width="85%"><font size=5><b>{{now().strftime("%I:%M %p")}}</b></font><br><font size=3> {{now().strftime("%A")}}, {{now().strftime("%B %-d")}} </font></td>
                          <td><font size=6><b>{{state_attr("weather.home_assistant", "temperature")}}Â°C</b></font><br><font size=4>{{states.weather.home_assistant.state}}  </font></td>
                        </tr>
                      </table>

                      
                  - type: horizontal-stack
                    card_mod:  
                      style: |
                        ha-card {
                          height: 100% !important;
                          background: none;
                          box-shadow: none;
                          
                        }
                    cards:
                      - type: button
                        tap_action:
                          action: navigate
                          navigation_path: home
                        show_name: true
                        show_icon: false
                        name: Home
                        card_mod:
                          style: |
                            ha-card {
                              font-weight: bold;
                              height: 100% !important;
                              background-color:rgba(115, 125, 140, 0.5);
                              box-shadow: 0 4px 8px 0 rgba(0, 0, 0, 0.2), 0 6px 20px 0 rgba(0, 0, 0, 0.19);
                              --ha-card-border-color: rgba(0,0,0,0);
                            }
                      - type: button
                        tap_action:
                          action: navigate
                          navigation_path: camera
                        show_name: true
                        show_icon: false
                        name: Camera
                        card_mod:
                          style: |
                            ha-card {
                              font-weight: bold;
                              height: 100% !important;
                              background-color:rgba(115, 125, 140, 0.7);
                              box-shadow: 0 4px 8px 0 rgba(0, 0, 0, 0.2), 0 6px 20px 0 rgba(0, 0, 0, 0.19);
                              --ha-card-border-color: rgba(0,0,0,0);
                            }
                      - type: button
                        tap_action:
                          action: navigate
                          navigation_path: garden
                        show_name: true
                        show_icon: false
                        name: Garden
                        card_mod:
                          style: |
                            ha-card {
                              font-weight: bold;
                              height: 100% !important;
                              background-color:rgba(115, 125, 140, 0.5);
                              box-shadow: 0 4px 8px 0 rgba(0, 0, 0, 0.2), 0 6px 20px 0 rgba(0, 0, 0, 0.19);
                              --ha-card-border-color: rgba(0,0,0,0);
                            }
                      - type: button
                        tap_action:
                          action: navigate
                          navigation_path: media
                        show_name: true
                        show_icon: false
                        name: Media
                        card_mod:
                          style: |
                            ha-card {
                              font-weight: bold;
                              height: 100% !important;
                              background-color:rgba(115, 125, 140, 0.5);
                              box-shadow: 0 4px 8px 0 rgba(0, 0, 0, 0.2), 0 6px 20px 0 rgba(0, 0, 0, 0.19);
                              --ha-card-border-color: rgba(0,0,0,0);
                            }
                      - type: button
                        tap_action:
                          action: navigate
                          navigation_path: system
                        show_name: true
                        show_icon: false
                        name: System
                        card_mod:
                          style: |
                            ha-card {
                              font-weight: bold;
                              height: 100% !important;
                              background-color:rgba(115, 125, 140, 0.5);
                              box-shadow: 0 4px 8px 0 rgba(0, 0, 0, 0.2), 0 6px 20px 0 rgba(0, 0, 0, 0.19);
                              --ha-card-border-color: rgba(0,0,0,0);
                            }
              - type: custom:stack-in-card
                card_mod:
                  style: |
                    ha-card {
                      background-color: #000066;
                      border-style: solid;
                      border-width: 0px;
                      border-radius: 20px;
                      height: 615px;
                    }
                keep:
                  background: true
                  box_shadow: true
                  margin: true
                  outer_padding: true
                  border_radius: true
                cards:
                  - type: grid
                    title: Laundry
                    cards:
                      - type: 'custom:button-card'
                        entity: sensor.washer_washer_job_state
                        size: 90%
                        show_name: false
                        icon: mdi:washing-machine
                        show_state: true
                        state_display: >
                                [[[
                                  if (entity.state != 'none') return entity.state;
                                  else return ' ';
                                ]]]
                        styles:
                          state:
                            - text-transform: Capitalize
                          icon:
                            - color: >
                                [[[
                                  if (entity.state !== 'none') return 'rgb(0, 179, 134)';
                                  else return 'rgb(169,169,169)';
                                ]]]
                        card_mod:
                          style: |
                            ha-card {
                              max-width: 130px;
                              height: 100% !important;
                              background-color:rgba(115, 125, 140, 0);
                              border-color: #000066;
                              margin-left: auto;
                              margin-right: auto;
                              --ha-card-box-shadow: rgba(0,0,0,0); 
                            }
                      - type: 'custom:button-card'
                        entity: sensor.dryer_dryer_job_state
                        size: 90%
                        show_name: false
                        show_state: true
                        state_display: >
                                  [[[
                                    if (entity.state == 'drying') return 'Drying';
                                    if (entity.state == 'cooling') return 'Cooling';
                                    else return ' ';
                                  ]]]
                        icon: mdi:tumble-dryer
                        styles:
                          state:
                            - text-transform: Capitalize
                          icon:
                            - color: >
                                [[[
                                  if (entity.state == 'drying') return 'rgb(0, 179, 134)';
                                  if (entity.state == 'cooling') return 'rgb(255, 102, 102)';
                                  else return 'rgb(169,169,169)';
                                ]]]
                        card_mod:
                          style: |
                            ha-card {
                              max-width: 130px;
                              height: 100% !important;
                              background-color:rgba(115, 125, 140, 0);
                              border-color: #000066;
                              margin-left: auto;
                              margin-right: auto;
                              --ha-card-box-shadow: rgba(0,0,0,0); 
                            }
                    columns: 6
                    square: false

            view_layout:
              grid-area: main
          - type: vertical-stack
            cards:
              - type: custom:stack-in-card
                card_mod:
                  style: |
                    ha-card {
                      background-color: #000066;
                      border-style: solid;
                      border-width: 0px;
                      border-radius: 20px;
                      height: 163px;
                      --ha-card-border-color: rgba(0,0,0,0);
                      --ha-card-box-shadow: rgba(0,0,0,0);
                    }
                keep:
                  background: true
                  box_shadow: true
                  margin: true
                  outer_padding: true
                  border_radius: true
                cards:
                  - type: custom:gap-card
                    height: 10
                    size: null
                  - type: horizontal-stack
                    card_mod:  
                      style: |
                        ha-card {
                          height: 100% !important;
                          background: none;
                          box-shadow: none;
                          border-color: #000066;
                          --ha-card-box-shadow: rgba(0,0,0,0);
                          margin: auto;
                        }
                    cards:
                      - type: 'custom:button-card'
                        size: 70%
                        show_name: false
                        icon: mdi:cctv
                        styles:
                          icon:
                            - color: rgb(0, 179, 134)
                        tap_action:
                          action: fire-dom-event
                          browser_mod:
                            command: call-service
                            service: browser_mod.popup
                            data:      
                              browser_id: THIS                    
                              size: fullscreen
                              autoclose: true
                              timeout: 60000
                              content:
                                type: grid
                                cards:
                                  - type: picture-entity
                                    entity: camera.driveway
                                    show_name: false
                                    show_state: false
                                    camera_view: live
                                    camera_image: camera.driveway
                                  - type: picture-entity
                                    entity: camera.front_porch
                                    show_name: false
                                    show_state: false
                                    camera_view: live
                                    camera_image: camera.front_porch
                                  - type: picture-entity
                                    entity: camera.side_entrance
                                    show_name: false
                                    show_state: false
                                    camera_view: live
                                    camera_image: camera.side_entrance
                                  - type: picture-entity
                                    entity: camera.backyard
                                    show_name: false
                                    show_state: false
                                    camera_view: live
                                    camera_image: camera.backyard
                                columns: 2
                                square: false
                              card_mod:
                                style:
                                  .: |
                                    :host {
                                      --ha-card-background: #000066;
                                      --ha-card-border-color: #000066;
                                      --ha-card-box-shadow: rgba(0,0,0,0);
                                      --mdc-dialog-scrim-color: rgba(255,255,255,0.5);
                                      --mdc-dialog-min-height: 0%;
                                      --mdc-dialog-min-width: 100%;
                                      --mdc-dialog-max-width: 100%;      
                                      --mdc-button.background-color: rgb(255, 173, 51);                                
                                    }
                        card_mod:
                          style: |
                            ha-card {
                              max-width: 130px;
                              height: 100% !important;
                              background-color:rgba(115, 125, 140, 0);
                              border-color: #000066;
                              margin-left: auto;
                              margin-right: auto;
                              --ha-card-box-shadow: rgba(0,0,0,0); 
                            }
                      - type: 'custom:button-card'
                        size: 60%
                        show_name: false
                        icon: mdi:car
                        styles:
                          icon:
                            - color: rgb(0, 179, 134)
                        tap_action:
                          action: fire-dom-event
                          browser_mod:
                            command: call-service
                            service: browser_mod.popup
                            data:      
                              browser_id: THIS                    
                              content:
                                type: picture-elements
                                image: /local/tileboard/images/RRS_HST2.jpg
                                style: |
                                  #root > hui-image {
                                    display: block;
                                    width: 100%;
                                    top: 10px;
                                    padding: 0px 0px 30px 0px;
                                    margin: auto;
                                  }
                                elements:
                                  - type: image
                                    image: /local/tileboard/images/bg2h.png
                                    style:
                                      left: 50%
                                      top: 90%
                                      width: 100%
                                      height: 60px
                                  - type: state-icon
                                    entity: lock.2020_range_rover_sport_doors
                                    tap_action:
                                      action: more-info
                                    style:
                                      color: white
                                      left: 15%
                                      top: 86%
                                  - type: state-label
                                    entity: lock.2020_range_rover_sport_doors
                                    style:
                                      color: white
                                      left: 15%
                                      top: 95%
                                  - type: state-icon
                                    entity: sensor.2020_range_rover_sport_windows
                                    tap_action:
                                      action: more-info
                                    style:
                                      color: white
                                      left: 38.3%
                                      top: 86%
                                  - type: state-label
                                    entity: sensor.2020_range_rover_sport_windows
                                    style:
                                      color: white
                                      left: 38.3%
                                      top: 95%
                                  - type: state-icon
                                    entity: sensor.2020_range_rover_sport_range
                                    tap_action:
                                      action: more-info
                                    style:
                                      color: white
                                      left: 61.6%
                                      top: 86%
                                  - type: state-label
                                    entity: sensor.2020_range_rover_sport_range
                                    style:
                                      color: white
                                      left: 61.6%
                                      top: 95%
                                  - type: state-icon
                                    entity: sensor.2020_range_rover_sport_info
                                    tap_action:
                                      action: more-info
                                    style:
                                      color: white
                                      left: 85%
                                      top: 86%
                                  - type: state-label
                                    entity: sensor.2020_range_rover_sport_info
                                    attribute: Odometer
                                    style:
                                      color: white
                                      left: 85%
                                      top: 95%
                        card_mod:
                          style: |
                            ha-card {
                              max-width: 130px;
                              height: 100% !important;
                              background-color:rgba(115, 125, 140, 0);
                              border-color: #000066;
                              margin-left: auto;
                              margin-right: auto;
                              --ha-card-box-shadow: rgba(0,0,0,0);
                            }

              - type: custom:stack-in-card
                card_mod:
                  style: |
                    ha-card {
                      background-color: #000066;
                      border-style: solid;
                      border-width: 0px;
                      border-radius: 20px;
                      height: 615px;
                      --ha-card-border-color: rgba(0,0,0,0);
                      --ha-card-box-shadow: rgba(0,0,0,0);
                    }
                keep:
                  background: true
                  box_shadow: true
                  margin: true
                  outer_padding: true
                  border_radius: true
                cards:
                  - type: horizontal-stack
                    card_mod:  
                      style: |
                        ha-card {
                          height: 100% !important;
                          background: none;
                          box-shadow: none;
                        }
                    cards:
                      - type: 'custom:button-card'
                        entity: cover.double
                        size: 90%
                        show_name: false
                        icon: >
                                [[[
                                  if (entity.state == 'open') return 'mdi:garage-open';
                                  if (entity.state == 'closed') return 'mdi:garage';
                                  else return 'mdi:garage-alert';
                                ]]]
                        styles:
                          icon:
                            - color: >
                                [[[
                                  if (entity.state == 'closed') return 'rgb(0, 179, 134)';
                                  if (entity.state == 'open') return 'rgb(255, 102, 102)';
                                  else return 'rgb(255, 173, 51)';
                                ]]]
                        card_mod:
                          style: |
                            ha-card {
                              max-width: 130px;
                              height: 100% !important;
                              background-color:rgba(115, 125, 140, 0);
                              border-color: #000066;
                              margin-left: auto;
                              margin-right: auto;
                              --ha-card-box-shadow: rgba(0,0,0,0); 
                            }
                      - type: 'custom:button-card'
                        entity: cover.single
                        size: 90%
                        show_name: false
                        icon: >
                                [[[
                                  if (entity.state == 'open') return 'mdi:garage-open';
                                  if (entity.state == 'closed') return 'mdi:garage';
                                  else return 'mdi:garage-alert';
                                ]]]
                        styles:
                          icon:
                            - color: >
                                [[[
                                  if (entity.state == 'closed') return 'rgb(0, 179, 134)';
                                  if (entity.state == 'open') return 'rgb(255, 102, 102)';
                                  else return 'rgb(255, 173, 51)';
                                ]]]
                        card_mod:
                          style: |
                            ha-card {
                              max-width: 130px;
                              height: 100% !important;
                              background-color:rgba(115, 125, 140, 0);
                              border-color: #000066;
                              margin-left: auto;
                              margin-right: auto;
                              --ha-card-box-shadow: rgba(0,0,0,0);
                            }
                  - type: horizontal-stack
                    card_mod:  
                      style: |
                        ha-card {
                          height: 100% !important;
                          background: none;
                          box-shadow: none;
                        }
                    cards:
                      - type: 'custom:button-card'
                        size: 70%
                        name: System
                        show_name: false
                        icon: >
                                [[[
                                  
                                  if (states['alarm_control_panel.home_alarm'].state == 'disarmed') return 'mdi:security';

                                  if (states['alarm_control_panel.home_alarm'].state == 'armed_home') return 'mdi:shield-home';
                                  if (states['alarm_control_panel.home_alarm'].state == 'armed_away') return 'mdi:shield-airplane';
                                  if (states['alarm_control_panel.home_alarm'].state == 'triggered') return 'mdi:shield-alert';
                                  if (states['alarm_control_panel.home_alarm'].state == 'pending') return 'mdi:security';
                                  else return 'mdi:shield-off';
                                ]]] 
                        styles:
                          icon:
                            - color: >
                                [[[
                                  if (states['alarm_control_panel.home_alarm'].state == 'disarmed' && states['sensor.home_alarm_keypad'].state != 'Not Ready' ) return 'rgb(0, 179, 134)';
                                  if (states['alarm_control_panel.home_alarm'].state == 'disarmed' && states['sensor.home_alarm_keypad'].state == 'Not Ready' ) return 'rgb(255, 173, 51)';
                                  if (states['alarm_control_panel.home_alarm'].state == 'armed_home') return 'rgb(255, 102, 102)';
                                  if (states['alarm_control_panel.home_alarm'].state == 'armed_away') return 'rgb(255, 102, 102)';
                                  if (states['alarm_control_panel.home_alarm'].state == 'triggered') return 'rgb(255, 102, 102)';
                                  else return 'rgb(255, 173, 51)';
                                ]]]
                          card:
                            - animation: >
                                [[[
                                  if (states['alarm_control_panel.home_alarm'].state == 'pending')  return 'blink 2s ease infinite';
                                ]]]
                        tap_action:
                          action: fire-dom-event
                          browser_mod:
                            command: call-service
                            service: browser_mod.popup
                            data:      
                              browser_id: THIS                    
                              content:
                                type: alarm-panel
                                entity: alarm_control_panel.home_alarm
                              card_mod:
                                style:
                                  .: |
                                    :host {
                                      --ha-card-background: #000066;
                                      --ha-card-border-color: #000066;
                                      --ha-card-box-shadow: rgba(0,0,0,0);
                                      --mdc-dialog-scrim-color: rgba(255,255,255,0.5);
                                      --mdc-dialog-min-height: 0%;
                                      --mdc-dialog-min-width: 100%;
                                      --mdc-dialog-max-width: 100%;      
                                      --mdc-button.background-color: rgb(255, 173, 51);                                
                                    }
                        card_mod:
                          style: |
                            ha-card {
                              max-width: 130px;
                              height: 100% !important;
                              background-color:rgba(115, 125, 140, 0);
                              border-color: #000066;
                              margin-left: auto;
                              margin-right: auto;
                              --ha-card-box-shadow: rgba(0,0,0,0);
                            }
                      - type: 'custom:button-card'
                        entity: lock.front_door
                        size: 70%
                        show_name: false
                        icon: >
                                [[[
                                  if (entity.state == 'locked') return 'mdi:lock';
                                  if (entity.state == 'locked') return 'mdi:lock-alert';
                                  if (entity.state == 'unlocked') return 'mdi:lock-open';
                                  if (entity.state == 'unlocked') return 'mdi:lock-open-alert';
                                  else return 'mdi:lock-off';
                                ]]]
                        styles:
                          icon:
                            - color: >
                                [[[
                                  if (entity.state == 'locked') return 'rgb(0, 179, 134)';
                                  if (entity.state == 'locked') return 'rgb(255, 102, 102)';
                                  if (entity.state == 'unlocked') return 'rgb(255, 102, 102)';
                                  if (entity.state == 'unlocked') return 'rgb(255, 102, 102)';
                                  else return 'rgb(255, 173, 51)';
                                ]]]
                       #   grid:
                        #    - position: relative
                         # custom_fields:
                          #  notification:
                           #   - border-radius: 50%
                            #  - position: absolute
                             # - left: 70%
                             # - top: 10%
                              #- height: 25px
                              #- width: 25px
                              #- font-size: 12px
                              #- font-weight: bold
                              #- line-height: 20px
                       # custom_fields:
                        #  notification: >
                         #   [[[ return states['sensor.front_door_battery'].state + "%" ]]]
                        card_mod:
                          style: |
                            ha-card {
                              max-width: 130px;
                              height: 100% !important;
                              background-color:rgba(115, 125, 140, 0);
                              border-color: #000066;
                              margin-left: auto;
                              margin-right: auto;
                              --ha-card-box-shadow: rgba(0,0,0,0);
                            }

                  - type: horizontal-stack
                    card_mod:  
                      style: |
                        ha-card {
                          height: 100% !important;
                          background: none;
                          box-shadow: none;
                        }
                    cards:
                      - type: 'custom:button-card'
                        entity: binary_sensor.doors
                        size: 70%
                        show_name: false
                        icon: >
                                [[[
                                  if (entity.state == 'off') return 'mdi:door';
                                  if (entity.state == 'on') return 'mdi:door-open';
                                  else return 'mdi:door';
                                ]]]
                        styles:
                          icon:
                            - color: >
                                [[[
                                  if (entity.state == 'off') return 'rgb(0, 179, 134)';
                                  if (entity.state == 'on') return 'rgb(255, 102, 102)';
                                  else return 'rgb(169,169,169)';
                                ]]]
                          card:
                            - animation: >
                                [[[
                                  if (entity.state == 'on')  return 'blink 2s ease infinite';
                                ]]]
                        card_mod:
                          style: |
                            ha-card {
                              max-width: 130px;
                              height: 100% !important;
                              background-color:rgba(115, 125, 140, 0);
                              border-color: #000066;
                              margin-left: auto;
                              margin-right: auto;
                              --ha-card-box-shadow: rgba(0,0,0,0); 
                            }
                      - type: 'custom:button-card'
                        entity: binary_sensor.windows
                        size: 60%
                        show_name: false
                        icon: >
                                [[[
                                  if (entity.state == 'off') return 'mdi:window-closed-variant';
                                  if (entity.state == 'on') return 'mdi:window-open-variant';
                                  else return 'mdi:window-closed-variant';
                                ]]]
                        styles:
                          icon:
                            - color: >
                                [[[
                                  if (entity.state == 'off') return 'rgb(0, 179, 134)';
                                  if (entity.state == 'on') return 'rgb(255, 102, 102)';
                                  else return 'rgb(169,169,169)';
                                ]]]
                          card:
                            - animation: >
                                [[[
                                  if (entity.state == 'on')  return 'blink 2s ease infinite';
                                ]]]
                        card_mod:
                          style: |
                            ha-card {
                              max-width: 130px;
                              height: 100% !important;
                              background-color:rgba(115, 125, 140, 0);
                              border-color: #000066;
                              margin-left: auto;
                              margin-right: auto;
                              --ha-card-box-shadow: rgba(0,0,0,0);
                            }
                  - type: horizontal-stack
                    card_mod:  
                      style: |
                        ha-card {
                          height: 100% !important;
                          background: none;
                          box-shadow: none;
                        }
                    cards:
                      - type: 'custom:button-card'
                        entity: sensor.hvac_state
                        size: 70%
                        show_name: false
                        show_state: false
                        icon: mdi:fan
                        tap_action:
                          entity: climate.nest
                          action: more-info
                        state:
                          - value: 'Heat'
                            spin: true
                          - value: 'Cool'
                            spin: true
                        styles:
                          icon:
                            - color: >
                                [[[
                                  if (entity.state == 'Idle') return 'rgb(0, 179, 134)';
                                  if (entity.state == 'Heat') return 'rgb(255, 173, 51)';
                                  if (entity.state == 'Cool') return 'rgb(16, 137, 243)';
                                  else return 'rgb(169,169,169)';
                                ]]]
                          card:
                            - animation: >
                                [[[
                                  if (entity.state == 'unknown')  return 'blink 2s ease infinite';
                                ]]]
                        card_mod:
                          style: |
                            ha-card {
                              max-width: 130px;
                              height: 100% !important;
                              background-color:rgba(115, 125, 140, 0);
                              border-color: #000066;
                              margin-left: auto;
                              margin-right: auto;
                              --ha-card-box-shadow: rgba(0,0,0,0); 
                            }
                      - type: 'custom:button-card'
                        entity: switch.television
                        size: 70%
                        show_name: false
                        tap_action:
                          action: toggle
                        icon: >
                                [[[
                                  if (entity.state == 'off') return 'mdi:television-off';
                                  if (entity.state == 'on') return 'mdi:television-play';
                                  else return 'mdi:television';
                                ]]]
                        styles:
                          icon:
                            - color: >
                                [[[
                                  if (entity.state == 'off') return 'rgb(0, 179, 134)';
                                  if (entity.state == 'on') return 'rgb(196, 205, 48)';
                                  else return 'rgb(255, 173, 51)';
                                ]]]
                        card_mod:
                          style: |
                            ha-card {
                              max-width: 130px;
                              height: 100% !important;
                              background-color:rgba(115, 125, 140, 0);
                              border-color: #000066;
                              margin-left: auto;
                              margin-right: auto;
                              --ha-card-box-shadow: rgba(0,0,0,0);
                            }
                  - type: horizontal-stack
                    card_mod:  
                      style: |
                        ha-card {
                          height: 100% !important;
                          background: none;
                          box-shadow: none;
                        }
                    cards:
                      - type: 'custom:button-card'
                        entity: binary_sensor.internet 
                        size: 70%
                        show_name: false
                        icon: >
                                [[[
                                  if (entity.state == 'on') return 'mdi:check-network';
                                  if (entity.state == 'off') return 'mdi:close-network';
                                  else return 'mdi:server-network';
                                ]]]
                        styles:
                          icon:
                            - color: >
                                [[[
                                  if (entity.state == 'on') return 'rgb(0, 179, 134)';
                                  if (entity.state == 'off') return 'rgb(255, 102, 102)';
                                  else return 'rgb(169,169,169)';
                                ]]]
                          card:
                            - animation: >
                                [[[
                                  if (entity.state == 'off')  return 'blink 2s ease infinite';
                                ]]]
                        card_mod:
                          style: |
                            ha-card {
                              max-width: 130px;
                              height: 100% !important;
                              background-color:rgba(115, 125, 140, 0);
                              border-color: #000066;
                              margin-left: auto;
                              margin-right: auto;
                              --ha-card-box-shadow: rgba(0,0,0,0); 
                            }
                      - type: 'custom:button-card'
                        entity: switch.bell_disable
                        hold_action:
                          action: toggle
                        size: 70%
                        show_name: false
                        icon: >
                                [[[
                                  if (entity.state == 'on') return 'mdi:bell-off';
                                  if (entity.state == 'off') return 'mdi:bell-ring';
                                  else return 'mdi:bell';
                                ]]]
                        styles:
                          icon:
                            - color: >
                                [[[
                                  if (entity.state == 'off') return 'rgb(0, 179, 134)';
                                  if (entity.state == 'on') return 'rgb(255, 102, 102)';
                                  else return 'rgb(169,169,169)';
                                ]]]
                        card_mod:
                          style: |
                            ha-card {
                              max-width: 130px;
                              height: 100% !important;
                              background-color:rgba(115, 125, 140, 0);
                              border-color: #000066;
                              margin-left: auto;
                              margin-right: auto;
                              --ha-card-box-shadow: rgba(0,0,0,0); 
                            }
            view_layout:
              grid-area: sidebar
  - title: Garden
    path: garden
    icon: ''
    theme: clear-dark
    type: panel
    layout: {}
    badges: []
    cards:
      - type: custom:layout-card
        layout_type: custom:grid-layout
        layout:
          grid-template-columns: auto 0.01px 25%
          grid-template-rows: auto
          grid-template-areas: |
            "main . sidebar"
        cards:
          - type: vertical-stack
            cards:
              - type: custom:stack-in-card
                card_mod:
                  style: |
                    ha-card {
                      background: linear-gradient(to top, #000066 0%, #660066 100%);
                      border-style: solid;
                      border-width: 0px;
                      border-radius: 20px;
                      --ha-card-border-color: rgba(0,0,0,0);
                    }
                keep:
                  background: true
                  box_shadow: true
                  margin: true
                  outer_padding: true
                  border_radius: true
                cards:
                  - type: markdown
                    style:
                      .: |
                        ha-markdown.no-header {
                          padding-top: 0px !important; 
                          }
                        ha-markdown {
                          padding: 0px 0px 0px !important; 
                          }
                        ha-card {
                          border-radius: 20px;
                          overflow: hidden;
                          margin: 0 auto;

                          background: none;
                          box-shadow: none;

                        }
                      ha-markdown:
                        $: |
                          td, th {
                            word-wrap: break-word;
                            border-spacing: 0px;
                            
                                margin-left:auto; 
                                margin-right:auto;

                          }
                          table {
                            border-spacing: 0px;
                                margin-left:auto; 
                                margin-right:auto;
                          }
                    content: >-
                      <table >
                        <tr>
                          <td width="10%" ><img src="/local/tileboard/images/HA2.png" alt="" border=3 height=90 width=100 ></img></td>
                          <td width="85%"><font size=5><b>{{now().strftime("%I:%M %p")}}</b></font><br><font size=3> {{now().strftime("%A")}}, {{now().strftime("%B %-d")}} </font></td>
                          <td><font size=6><b>{{state_attr("weather.home_assistant", "temperature")}}Â°C</b></font><br><font size=4>{{states.weather.home_assistant.state}}  </font></td>
                        </tr>
                      </table>

                      
                  - type: horizontal-stack
                    card_mod:  
                      style: |
                        ha-card {
                          height: 100% !important;
                          background: none;
                          box-shadow: none;
                          
                        }
                    cards:
                      - type: button
                        tap_action:
                          action: navigate
                          navigation_path: home
                        show_name: true
                        show_icon: false
                        name: Home
                        card_mod:
                          style: |
                            ha-card {
                              font-weight: bold;
                              height: 100% !important;
                              background-color:rgba(115, 125, 140, 0.5);
                              box-shadow: 0 4px 8px 0 rgba(0, 0, 0, 0.2), 0 6px 20px 0 rgba(0, 0, 0, 0.19);
                              --ha-card-border-color: rgba(0,0,0,0);
                            }
                      - type: button
                        tap_action:
                          action: navigate
                          navigation_path: camera
                        show_name: true
                        show_icon: false
                        name: Camera
                        card_mod:
                          style: |
                            ha-card {
                              font-weight: bold;
                              height: 100% !important;
                              background-color:rgba(115, 125, 140, 0.5);
                              box-shadow: 0 4px 8px 0 rgba(0, 0, 0, 0.2), 0 6px 20px 0 rgba(0, 0, 0, 0.19);
                              --ha-card-border-color: rgba(0,0,0,0);
                            }
                      - type: button
                        tap_action:
                          action: navigate
                          navigation_path: garden
                        show_name: true
                        show_icon: false
                        name: Garden
                        card_mod:
                          style: |
                            ha-card {
                              font-weight: bold;
                              height: 100% !important;
                              background-color:rgba(115, 125, 140, 0.7);
                              box-shadow: 0 4px 8px 0 rgba(0, 0, 0, 0.2), 0 6px 20px 0 rgba(0, 0, 0, 0.19);
                              --ha-card-border-color: rgba(0,0,0,0);
                            }
                      - type: button
                        tap_action:
                          action: navigate
                          navigation_path: media
                        show_name: true
                        show_icon: false
                        name: Media
                        card_mod:
                          style: |
                            ha-card {
                              font-weight: bold;
                              height: 100% !important;
                              background-color:rgba(115, 125, 140, 0.5);
                              box-shadow: 0 4px 8px 0 rgba(0, 0, 0, 0.2), 0 6px 20px 0 rgba(0, 0, 0, 0.19);
                              --ha-card-border-color: rgba(0,0,0,0);
                            }
                      - type: button
                        tap_action:
                          action: navigate
                          navigation_path: system
                        show_name: true
                        show_icon: false
                        name: System
                        card_mod:
                          style: |
                            ha-card {
                              font-weight: bold;
                              height: 100% !important;
                              background-color:rgba(115, 125, 140, 0.5);
                              box-shadow: 0 4px 8px 0 rgba(0, 0, 0, 0.2), 0 6px 20px 0 rgba(0, 0, 0, 0.19);
                              --ha-card-border-color: rgba(0,0,0,0);
                            }
              - type: custom:stack-in-card
                card_mod:
                  style: |
                    ha-card {
                      background-color: #000066;
                      border-style: solid;
                      border-width: 0px;
                      border-radius: 20px;
                      height: 615px;
                    }
                keep:
                  background: true
                  box_shadow: true
                  margin: true
                  outer_padding: true
                  border_radius: true
                cards:
                  - type: grid
                    cards:
                      - type: horizontal-stack
                        title: Status
                        cards:
                          - type: entities
                            entities:
                              - entity: sensor.auto_watering_status
                                name: Mode
                              - entity: sensor.watering_status
                                name: State
                              - entity: sensor.sprinkler_on_time
                                name: Remaining Time
                                icon: mdi:timer-sand
                            card_mod:
                              style: |
                                ha-card {
                                  max-width: 100%;
                                  height: 100% !important;
                                  background-color:rgba(115, 125, 140, 0);
                                  border-color: #000066;
                                  margin-left: auto;
                                  margin-right: auto;
                                  --ha-card-box-shadow: rgba(0,0,0,0); 
                                }                            
                      - type: grid
                        title: Settings
                        cards:
                          - type: 'custom:button-card'
                            entity: input_boolean.garden_auto_water
                            size: 90%
                            show_name: false
                            show_state: false
                            icon: >
                                    [[[
                                      if (entity.state == 'on') return 'mdi:alpha-a-box';
                                      else return 'mdi:alpha-m-box';
                                    ]]]
                            styles:
                              icon:
                                - color: >
                                    [[[
                                      if (entity.state == 'on') return 'rgb(196, 205, 48)';
                                      if (entity.state == 'off') return 'rgb(48, 167, 205)';
                                      else return 'rgb(255, 173, 51)';
                                    ]]]
                            card_mod:
                              style: |
                                ha-card {
                                  max-width: 130px;
                                  height: 100% !important;
                                  background-color:rgba(115, 125, 140, 0);
                                  border-color: #000066;
                                  margin-left: auto;
                                  margin-right: auto;
                                  --ha-card-box-shadow: rgba(0,0,0,0); 
                                }
                          - type: entities
                            entities:
                              - entity: input_number.sprinkler_set_duration
                                name: Duration
                                units: 'mins'
                            card_mod:
                              style: |
                                ha-card {
                                  max-width: 100%;
                                  height: 100% !important;
                                  background-color:rgba(115, 125, 140, 0);
                                  border-color: #000066;
                                  margin-left: auto;
                                  margin-right: auto;
                                  --ha-card-box-shadow: rgba(0,0,0,0); 
                                }
                        columns: 1
                        square: false
                    columns: 2
                    square: false
                  - type: grid
                    title: Zones
                    cards:
                      - type: 'custom:button-card'
                        entity: input_boolean.zone_1
                        size: 90%
                        show_name: false
                        show_state: false
                        icon: >
                                [[[
                                  if (entity.state == 'on') return 'mdi:numeric-1-box';
                                  if (entity.state == 'off') return 'mdi:numeric-1-box-outline';
                                  else return 'mdi:numeric-1-box-outline';
                                ]]]
                        styles:
                          icon:
                            - color: >
                                [[[
                                  if (entity.state == 'on') return 'rgb(196, 205, 48)';
                                  if (entity.state == 'off') return 'rgb(48, 167, 205)';
                                  else return 'rgb(255, 173, 51)';
                                ]]]
                        card_mod:
                          style: |
                            ha-card {
                              max-width: 130px;
                              height: 100% !important;
                              background-color:rgba(115, 125, 140, 0);
                              border-color: #000066;
                              margin-left: auto;
                              margin-right: auto;
                              --ha-card-box-shadow: rgba(0,0,0,0); 
                            }
                      - type: 'custom:button-card'
                        entity: input_boolean.zone_2
                        size: 90%
                        show_name: false
                        show_state: false
                        icon: >
                                [[[
                                  if (entity.state == 'on') return 'mdi:numeric-2-box';
                                  if (entity.state == 'off') return 'mdi:numeric-2-box-outline';
                                  else return 'mdi:numeric-2-box-outline';
                                ]]]
                        styles:
                          icon:
                            - color: >
                                [[[
                                  if (entity.state == 'on') return 'rgb(196, 205, 48)';
                                  if (entity.state == 'off') return 'rgb(48, 167, 205)';
                                  else return 'rgb(255, 173, 51)';
                                ]]]
                        card_mod:
                          style: |
                            ha-card {
                              max-width: 130px;
                              height: 100% !important;
                              background-color:rgba(115, 125, 140, 0);
                              border-color: #000066;
                              margin-left: auto;
                              margin-right: auto;
                              --ha-card-box-shadow: rgba(0,0,0,0); 
                            }
                      - type: 'custom:button-card'
                        entity: input_boolean.zone_3
                        size: 90%
                        show_name: false
                        show_state: false
                        icon: >
                                [[[
                                  if (entity.state == 'on') return 'mdi:numeric-3-box';
                                  if (entity.state == 'off') return 'mdi:numeric-3-box-outline';
                                  else return 'mdi:numeric-3-box-outline';
                                ]]]
                        styles:
                          icon:
                            - color: >
                                [[[
                                  if (entity.state == 'on') return 'rgb(196, 205, 48)';
                                  if (entity.state == 'off') return 'rgb(48, 167, 205)';
                                  else return 'rgb(255, 173, 51)';
                                ]]]
                        card_mod:
                          style: |
                            ha-card {
                              max-width: 130px;
                              height: 100% !important;
                              background-color:rgba(115, 125, 140, 0);
                              border-color: #000066;
                              margin-left: auto;
                              margin-right: auto;
                              --ha-card-box-shadow: rgba(0,0,0,0); 
                            }
                      - type: 'custom:button-card'
                        entity: input_boolean.zone_4
                        size: 90%
                        show_name: false
                        show_state: false
                        icon: >
                                [[[
                                  if (entity.state == 'on') return 'mdi:numeric-4-box';
                                  if (entity.state == 'off') return 'mdi:numeric-4-box-outline';
                                  else return 'mdi:numeric-4-box-outline';
                                ]]]
                        styles:
                          icon:
                            - color: >
                                [[[
                                  if (entity.state == 'on') return 'rgb(196, 205, 48)';
                                  if (entity.state == 'off') return 'rgb(48, 167, 205)';
                                  else return 'rgb(255, 173, 51)';
                                ]]]
                        card_mod:
                          style: |
                            ha-card {
                              max-width: 130px;
                              height: 100% !important;
                              background-color:rgba(115, 125, 140, 0);
                              border-color: #000066;
                              margin-left: auto;
                              margin-right: auto;
                              --ha-card-box-shadow: rgba(0,0,0,0); 
                            }
                      - type: 'custom:button-card'
                        entity: input_boolean.zone_5
                        size: 90%
                        show_name: false
                        show_state: false
                        icon: >
                                [[[
                                  if (entity.state == 'on') return 'mdi:numeric-5-box';
                                  if (entity.state == 'off') return 'mdi:numeric-5-box-outline';
                                  else return 'mdi:numeric-5-box-outline';
                                ]]]
                        styles:
                          icon:
                            - color: >
                                [[[
                                  if (entity.state == 'on') return 'rgb(196, 205, 48)';
                                  if (entity.state == 'off') return 'rgb(48, 167, 205)';
                                  else return 'rgb(255, 173, 51)';
                                ]]]
                        card_mod:
                          style: |
                            ha-card {
                              max-width: 130px;
                              height: 100% !important;
                              background-color:rgba(115, 125, 140, 0);
                              border-color: #000066;
                              margin-left: auto;
                              margin-right: auto;
                              --ha-card-box-shadow: rgba(0,0,0,0); 
                            }
                    columns: 5
                    square: false
            view_layout:
              grid-area: main
          - type: vertical-stack
            cards:
              - type: custom:stack-in-card
                card_mod:
                  style: |
                    ha-card {
                      background-color: #000066;
                      border-style: solid;
                      border-width: 0px;
                      border-radius: 20px;
                      height: 163px;
                      --ha-card-border-color: rgba(0,0,0,0);
                      --ha-card-box-shadow: rgba(0,0,0,0);
                    }
                keep:
                  background: true
                  box_shadow: true
                  margin: true
                  outer_padding: true
                  border_radius: true
                cards:
                  - type: custom:gap-card
                    height: 10
                    size: null
                  - type: horizontal-stack
                    card_mod:  
                      style: |
                        ha-card {
                          height: 100% !important;
                          background: none;
                          box-shadow: none;
                          border-color: #000066;
                          --ha-card-box-shadow: rgba(0,0,0,0);
                          margin: auto;
                        }
                    cards:
                      - type: 'custom:button-card'
                        size: 70%
                        show_name: false
                        icon: mdi:cctv
                        styles:
                          icon:
                            - color: rgb(0, 179, 134)
                        tap_action:
                          action: fire-dom-event
                          browser_mod:
                            command: call-service
                            service: browser_mod.popup
                            data:      
                              browser_id: THIS                    
                              size: fullscreen
                              autoclose: true
                              timeout: 60000
                              content:
                                type: grid
                                cards:
                                  - type: picture-entity
                                    entity: camera.driveway
                                    show_name: false
                                    show_state: false
                                    camera_view: live
                                    camera_image: camera.driveway
                                  - type: picture-entity
                                    entity: camera.front_porch
                                    show_name: false
                                    show_state: false
                                    camera_view: live
                                    camera_image: camera.front_porch
                                  - type: picture-entity
                                    entity: camera.side_entrance
                                    show_name: false
                                    show_state: false
                                    camera_view: live
                                    camera_image: camera.side_entrance
                                  - type: picture-entity
                                    entity: camera.backyard
                                    show_name: false
                                    show_state: false
                                    camera_view: live
                                    camera_image: camera.backyard
                                columns: 2
                                square: false
                              card_mod:
                                style:
                                  .: |
                                    :host {
                                      --ha-card-background: #000066;
                                      --ha-card-border-color: #000066;
                                      --ha-card-box-shadow: rgba(0,0,0,0);
                                      --mdc-dialog-scrim-color: rgba(255,255,255,0.5);
                                      --mdc-dialog-min-height: 0%;
                                      --mdc-dialog-min-width: 100%;
                                      --mdc-dialog-max-width: 100%;      
                                      --mdc-button.background-color: rgb(255, 173, 51);                                
                                    }
                        card_mod:
                          style: |
                            ha-card {
                              max-width: 130px;
                              height: 100% !important;
                              background-color:rgba(115, 125, 140, 0);
                              border-color: #000066;
                              margin-left: auto;
                              margin-right: auto;
                              --ha-card-box-shadow: rgba(0,0,0,0); 
                            }
                      - type: 'custom:button-card'
                        size: 60%
                        show_name: false
                        icon: mdi:car
                        styles:
                          icon:
                            - color: rgb(0, 179, 134)
                        tap_action:
                          action: fire-dom-event
                          browser_mod:
                            command: call-service
                            service: browser_mod.popup
                            data:      
                              browser_id: THIS                    
                              content:
                                type: picture-elements
                                image: /local/tileboard/images/RRS_HST2.jpg
                                style: |
                                  #root > hui-image {
                                    display: block;
                                    width: 100%;
                                    top: 10px;
                                    padding: 0px 0px 30px 0px;
                                    margin: auto;
                                  }
                                elements:
                                  - type: image
                                    image: /local/tileboard/images/bg2h.png
                                    style:
                                      left: 50%
                                      top: 90%
                                      width: 100%
                                      height: 60px
                                  - type: state-icon
                                    entity: lock.2020_range_rover_sport_doors
                                    tap_action:
                                      action: more-info
                                    style:
                                      color: white
                                      left: 15%
                                      top: 86%
                                  - type: state-label
                                    entity: lock.2020_range_rover_sport_doors
                                    style:
                                      color: white
                                      left: 15%
                                      top: 95%
                                  - type: state-icon
                                    entity: sensor.2020_range_rover_sport_windows
                                    tap_action:
                                      action: more-info
                                    style:
                                      color: white
                                      left: 38.3%
                                      top: 86%
                                  - type: state-label
                                    entity: sensor.2020_range_rover_sport_windows
                                    style:
                                      color: white
                                      left: 38.3%
                                      top: 95%
                                  - type: state-icon
                                    entity: sensor.2020_range_rover_sport_range
                                    tap_action:
                                      action: more-info
                                    style:
                                      color: white
                                      left: 61.6%
                                      top: 86%
                                  - type: state-label
                                    entity: sensor.2020_range_rover_sport_range
                                    style:
                                      color: white
                                      left: 61.6%
                                      top: 95%
                                  - type: state-icon
                                    entity: sensor.2020_range_rover_sport_info
                                    tap_action:
                                      action: more-info
                                    style:
                                      color: white
                                      left: 85%
                                      top: 86%
                                  - type: state-label
                                    entity: sensor.2020_range_rover_sport_info
                                    attribute: Odometer
                                    style:
                                      color: white
                                      left: 85%
                                      top: 95%
                        card_mod:
                          style: |
                            ha-card {
                              max-width: 130px;
                              height: 100% !important;
                              background-color:rgba(115, 125, 140, 0);
                              border-color: #000066;
                              margin-left: auto;
                              margin-right: auto;
                              --ha-card-box-shadow: rgba(0,0,0,0);
                            }

              - type: custom:stack-in-card
                card_mod:
                  style: |
                    ha-card {
                      background-color: #000066;
                      border-style: solid;
                      border-width: 0px;
                      border-radius: 20px;
                      height: 615px;
                      --ha-card-border-color: rgba(0,0,0,0);
                      --ha-card-box-shadow: rgba(0,0,0,0);
                    }
                keep:
                  background: true
                  box_shadow: true
                  margin: true
                  outer_padding: true
                  border_radius: true
                cards:
                  - type: horizontal-stack
                    card_mod:  
                      style: |
                        ha-card {
                          height: 100% !important;
                          background: none;
                          box-shadow: none;
                        }
                    cards:
                      - type: 'custom:button-card'
                        entity: cover.double
                        size: 90%
                        show_name: false
                        icon: >
                                [[[
                                  if (entity.state == 'open') return 'mdi:garage-open';
                                  if (entity.state == 'closed') return 'mdi:garage';
                                  else return 'mdi:garage-alert';
                                ]]]
                        styles:
                          icon:
                            - color: >
                                [[[
                                  if (entity.state == 'closed') return 'rgb(0, 179, 134)';
                                  if (entity.state == 'open') return 'rgb(255, 102, 102)';
                                  else return 'rgb(255, 173, 51)';
                                ]]]
                        card_mod:
                          style: |
                            ha-card {
                              max-width: 130px;
                              height: 100% !important;
                              background-color:rgba(115, 125, 140, 0);
                              border-color: #000066;
                              margin-left: auto;
                              margin-right: auto;
                              --ha-card-box-shadow: rgba(0,0,0,0); 
                            }
                      - type: 'custom:button-card'
                        entity: cover.single
                        size: 90%
                        show_name: false
                        icon: >
                                [[[
                                  if (entity.state == 'open') return 'mdi:garage-open';
                                  if (entity.state == 'closed') return 'mdi:garage';
                                  else return 'mdi:garage-alert';
                                ]]]
                        styles:
                          icon:
                            - color: >
                                [[[
                                  if (entity.state == 'closed') return 'rgb(0, 179, 134)';
                                  if (entity.state == 'open') return 'rgb(255, 102, 102)';
                                  else return 'rgb(255, 173, 51)';
                                ]]]
                        card_mod:
                          style: |
                            ha-card {
                              max-width: 130px;
                              height: 100% !important;
                              background-color:rgba(115, 125, 140, 0);
                              border-color: #000066;
                              margin-left: auto;
                              margin-right: auto;
                              --ha-card-box-shadow: rgba(0,0,0,0);
                            }
                  - type: horizontal-stack
                    card_mod:  
                      style: |
                        ha-card {
                          height: 100% !important;
                          background: none;
                          box-shadow: none;
                        }
                    cards:
                      - type: 'custom:button-card'
                        size: 70%
                        name: System
                        show_name: false
                        icon: >
                                [[[
                                  
                                  if (states['alarm_control_panel.home_alarm'].state == 'disarmed') return 'mdi:security';

                                  if (states['alarm_control_panel.home_alarm'].state == 'armed_home') return 'mdi:shield-home';
                                  if (states['alarm_control_panel.home_alarm'].state == 'armed_away') return 'mdi:shield-airplane';
                                  if (states['alarm_control_panel.home_alarm'].state == 'triggered') return 'mdi:shield-alert';
                                  if (states['alarm_control_panel.home_alarm'].state == 'pending') return 'mdi:security';
                                  else return 'mdi:shield-off';
                                ]]] 
                        styles:
                          icon:
                            - color: >
                                [[[
                                  if (states['alarm_control_panel.home_alarm'].state == 'disarmed' && states['sensor.home_alarm_keypad'].state != 'Not Ready' ) return 'rgb(0, 179, 134)';
                                  if (states['alarm_control_panel.home_alarm'].state == 'disarmed' && states['sensor.home_alarm_keypad'].state == 'Not Ready' ) return 'rgb(255, 173, 51)';
                                  if (states['alarm_control_panel.home_alarm'].state == 'armed_home') return 'rgb(255, 102, 102)';
                                  if (states['alarm_control_panel.home_alarm'].state == 'armed_away') return 'rgb(255, 102, 102)';
                                  if (states['alarm_control_panel.home_alarm'].state == 'triggered') return 'rgb(255, 102, 102)';
                                  else return 'rgb(255, 173, 51)';
                                ]]]
                          card:
                            - animation: >
                                [[[
                                  if (states['alarm_control_panel.home_alarm'].state == 'pending')  return 'blink 2s ease infinite';
                                ]]]
                        tap_action:
                          action: fire-dom-event
                          browser_mod:
                            command: call-service
                            service: browser_mod.popup
                            data:      
                              browser_id: THIS                    
                              content:
                                type: alarm-panel
                                entity: alarm_control_panel.home_alarm
                              card_mod:
                                style:
                                  .: |
                                    :host {
                                      --ha-card-background: #000066;
                                      --ha-card-border-color: #000066;
                                      --ha-card-box-shadow: rgba(0,0,0,0);
                                      --mdc-dialog-scrim-color: rgba(255,255,255,0.5);
                                      --mdc-dialog-min-height: 0%;
                                      --mdc-dialog-min-width: 100%;
                                      --mdc-dialog-max-width: 100%;      
                                      --mdc-button.background-color: rgb(255, 173, 51);                                
                                    }
                        card_mod:
                          style: |
                            ha-card {
                              max-width: 130px;
                              height: 100% !important;
                              background-color:rgba(115, 125, 140, 0);
                              border-color: #000066;
                              margin-left: auto;
                              margin-right: auto;
                              --ha-card-box-shadow: rgba(0,0,0,0);
                            }
                      - type: 'custom:button-card'
                        entity: lock.front_door
                        size: 70%
                        show_name: false
                        icon: >
                                [[[
                                  if (entity.state == 'locked') return 'mdi:lock';
                                  if (entity.state == 'locked') return 'mdi:lock-alert';
                                  if (entity.state == 'unlocked') return 'mdi:lock-open';
                                  if (entity.state == 'unlocked') return 'mdi:lock-open-alert';
                                  else return 'mdi:lock-off';
                                ]]]
                        styles:
                          icon:
                            - color: >
                                [[[
                                  if (entity.state == 'locked') return 'rgb(0, 179, 134)';
                                  if (entity.state == 'locked') return 'rgb(255, 102, 102)';
                                  if (entity.state == 'unlocked') return 'rgb(255, 102, 102)';
                                  if (entity.state == 'unlocked') return 'rgb(255, 102, 102)';
                                  else return 'rgb(255, 173, 51)';
                                ]]]
                       #   grid:
                        #    - position: relative
                         # custom_fields:
                          #  notification:
                           #   - border-radius: 50%
                            #  - position: absolute
                             # - left: 70%
                             # - top: 10%
                              #- height: 25px
                              #- width: 25px
                              #- font-size: 12px
                              #- font-weight: bold
                              #- line-height: 20px
                       # custom_fields:
                        #  notification: >
                         #   [[[ return states['sensor.front_door_battery'].state + "%" ]]]
                        card_mod:
                          style: |
                            ha-card {
                              max-width: 130px;
                              height: 100% !important;
                              background-color:rgba(115, 125, 140, 0);
                              border-color: #000066;
                              margin-left: auto;
                              margin-right: auto;
                              --ha-card-box-shadow: rgba(0,0,0,0);
                            }

                  - type: horizontal-stack
                    card_mod:  
                      style: |
                        ha-card {
                          height: 100% !important;
                          background: none;
                          box-shadow: none;
                        }
                    cards:
                      - type: 'custom:button-card'
                        entity: binary_sensor.doors
                        size: 70%
                        show_name: false
                        icon: >
                                [[[
                                  if (entity.state == 'off') return 'mdi:door';
                                  if (entity.state == 'on') return 'mdi:door-open';
                                  else return 'mdi:door';
                                ]]]
                        styles:
                          icon:
                            - color: >
                                [[[
                                  if (entity.state == 'off') return 'rgb(0, 179, 134)';
                                  if (entity.state == 'on') return 'rgb(255, 102, 102)';
                                  else return 'rgb(169,169,169)';
                                ]]]
                          card:
                            - animation: >
                                [[[
                                  if (entity.state == 'on')  return 'blink 2s ease infinite';
                                ]]]
                        card_mod:
                          style: |
                            ha-card {
                              max-width: 130px;
                              height: 100% !important;
                              background-color:rgba(115, 125, 140, 0);
                              border-color: #000066;
                              margin-left: auto;
                              margin-right: auto;
                              --ha-card-box-shadow: rgba(0,0,0,0); 
                            }
                      - type: 'custom:button-card'
                        entity: binary_sensor.windows
                        size: 60%
                        show_name: false
                        icon: >
                                [[[
                                  if (entity.state == 'off') return 'mdi:window-closed-variant';
                                  if (entity.state == 'on') return 'mdi:window-open-variant';
                                  else return 'mdi:window-closed-variant';
                                ]]]
                        styles:
                          icon:
                            - color: >
                                [[[
                                  if (entity.state == 'off') return 'rgb(0, 179, 134)';
                                  if (entity.state == 'on') return 'rgb(255, 102, 102)';
                                  else return 'rgb(169,169,169)';
                                ]]]
                          card:
                            - animation: >
                                [[[
                                  if (entity.state == 'on')  return 'blink 2s ease infinite';
                                ]]]
                        card_mod:
                          style: |
                            ha-card {
                              max-width: 130px;
                              height: 100% !important;
                              background-color:rgba(115, 125, 140, 0);
                              border-color: #000066;
                              margin-left: auto;
                              margin-right: auto;
                              --ha-card-box-shadow: rgba(0,0,0,0);
                            }
                  - type: horizontal-stack
                    card_mod:  
                      style: |
                        ha-card {
                          height: 100% !important;
                          background: none;
                          box-shadow: none;
                        }
                    cards:
                      - type: 'custom:button-card'
                        entity: sensor.hvac_state
                        size: 70%
                        show_name: false
                        show_state: false
                        icon: mdi:fan
                        tap_action:
                          entity: climate.nest
                          action: more-info
                        state:
                          - value: 'Heat'
                            spin: true
                          - value: 'Cool'
                            spin: true
                        styles:
                          icon:
                            - color: >
                                [[[
                                  if (entity.state == 'Idle') return 'rgb(0, 179, 134)';
                                  if (entity.state == 'Heat') return 'rgb(255, 173, 51)';
                                  if (entity.state == 'Cool') return 'rgb(16, 137, 243)';
                                  else return 'rgb(169,169,169)';
                                ]]]
                          card:
                            - animation: >
                                [[[
                                  if (entity.state == 'unknown')  return 'blink 2s ease infinite';
                                ]]]
                        card_mod:
                          style: |
                            ha-card {
                              max-width: 130px;
                              height: 100% !important;
                              background-color:rgba(115, 125, 140, 0);
                              border-color: #000066;
                              margin-left: auto;
                              margin-right: auto;
                              --ha-card-box-shadow: rgba(0,0,0,0); 
                            }
                      - type: 'custom:button-card'
                        entity: switch.television
                        size: 70%
                        show_name: false
                        tap_action:
                          action: toggle
                        icon: >
                                [[[
                                  if (entity.state == 'off') return 'mdi:television-off';
                                  if (entity.state == 'on') return 'mdi:television-play';
                                  else return 'mdi:television';
                                ]]]
                        styles:
                          icon:
                            - color: >
                                [[[
                                  if (entity.state == 'off') return 'rgb(0, 179, 134)';
                                  if (entity.state == 'on') return 'rgb(196, 205, 48)';
                                  else return 'rgb(255, 173, 51)';
                                ]]]
                        card_mod:
                          style: |
                            ha-card {
                              max-width: 130px;
                              height: 100% !important;
                              background-color:rgba(115, 125, 140, 0);
                              border-color: #000066;
                              margin-left: auto;
                              margin-right: auto;
                              --ha-card-box-shadow: rgba(0,0,0,0);
                            }
                  - type: horizontal-stack
                    card_mod:  
                      style: |
                        ha-card {
                          height: 100% !important;
                          background: none;
                          box-shadow: none;
                        }
                    cards:
                      - type: 'custom:button-card'
                        entity: binary_sensor.internet 
                        size: 70%
                        show_name: false
                        icon: >
                                [[[
                                  if (entity.state == 'on') return 'mdi:check-network';
                                  if (entity.state == 'off') return 'mdi:close-network';
                                  else return 'mdi:server-network';
                                ]]]
                        styles:
                          icon:
                            - color: >
                                [[[
                                  if (entity.state == 'on') return 'rgb(0, 179, 134)';
                                  if (entity.state == 'off') return 'rgb(255, 102, 102)';
                                  else return 'rgb(169,169,169)';
                                ]]]
                          card:
                            - animation: >
                                [[[
                                  if (entity.state == 'off')  return 'blink 2s ease infinite';
                                ]]]
                        card_mod:
                          style: |
                            ha-card {
                              max-width: 130px;
                              height: 100% !important;
                              background-color:rgba(115, 125, 140, 0);
                              border-color: #000066;
                              margin-left: auto;
                              margin-right: auto;
                              --ha-card-box-shadow: rgba(0,0,0,0); 
                            }
                      - type: 'custom:button-card'
                        entity: switch.bell_disable
                        hold_action:
                          action: toggle
                        size: 70%
                        show_name: false
                        icon: >
                                [[[
                                  if (entity.state == 'on') return 'mdi:bell-off';
                                  if (entity.state == 'off') return 'mdi:bell-ring';
                                  else return 'mdi:bell';
                                ]]]
                        styles:
                          icon:
                            - color: >
                                [[[
                                  if (entity.state == 'off') return 'rgb(0, 179, 134)';
                                  if (entity.state == 'on') return 'rgb(255, 102, 102)';
                                  else return 'rgb(169,169,169)';
                                ]]]
                        card_mod:
                          style: |
                            ha-card {
                              max-width: 130px;
                              height: 100% !important;
                              background-color:rgba(115, 125, 140, 0);
                              border-color: #000066;
                              margin-left: auto;
                              margin-right: auto;
                              --ha-card-box-shadow: rgba(0,0,0,0); 
                            }
            view_layout:
              grid-area: sidebar
  - title: Media
    path: media
    icon: ''
    theme: clear-dark
    type: panel
    layout: {}
    badges: []
    cards:
      - type: custom:layout-card
        layout_type: custom:grid-layout
        layout:
          grid-template-columns: auto 0.01px 25%
          grid-template-rows: auto
          grid-template-areas: |
            "main . sidebar"
        cards:
          - type: vertical-stack
            cards:
              - type: custom:stack-in-card
                card_mod:
                  style: |
                    ha-card {
                      background: linear-gradient(to top, #000066 0%, #660066 100%);
                      border-style: solid;
                      border-width: 0px;
                      border-radius: 20px;
                      --ha-card-border-color: rgba(0,0,0,0);
                    }
                keep:
                  background: true
                  box_shadow: true
                  margin: true
                  outer_padding: true
                  border_radius: true
                cards:
                  - type: markdown
                    style:
                      .: |
                        ha-markdown.no-header {
                          padding-top: 0px !important; 
                          }
                        ha-markdown {
                          padding: 0px 0px 0px !important; 
                          }
                        ha-card {
                          border-radius: 20px;
                          overflow: hidden;
                          margin: 0 auto;

                          background: none;
                          box-shadow: none;

                        }
                      ha-markdown:
                        $: |
                          td, th {
                            word-wrap: break-word;
                            border-spacing: 0px;
                            
                                margin-left:auto; 
                                margin-right:auto;

                          }
                          table {
                            border-spacing: 0px;
                                margin-left:auto; 
                                margin-right:auto;
                          }
                    content: >-
                      <table >
                        <tr>
                          <td width="10%" ><img src="/local/tileboard/images/HA2.png" alt="" border=3 height=90 width=100 ></img></td>
                          <td width="85%"><font size=5><b>{{now().strftime("%I:%M %p")}}</b></font><br><font size=3> {{now().strftime("%A")}}, {{now().strftime("%B %-d")}} </font></td>
                          <td><font size=6><b>{{state_attr("weather.home_assistant", "temperature")}}Â°C</b></font><br><font size=4>{{states.weather.home_assistant.state}}  </font></td>
                        </tr>
                      </table>

                      
                  - type: horizontal-stack
                    card_mod:  
                      style: |
                        ha-card {
                          height: 100% !important;
                          background: none;
                          box-shadow: none;
                          
                        }
                    cards:
                      - type: button
                        tap_action:
                          action: navigate
                          navigation_path: home
                        show_name: true
                        show_icon: false
                        name: Home
                        card_mod:
                          style: |
                            ha-card {
                              font-weight: bold;
                              height: 100% !important;
                              background-color:rgba(115, 125, 140, 0.5);
                              box-shadow: 0 4px 8px 0 rgba(0, 0, 0, 0.2), 0 6px 20px 0 rgba(0, 0, 0, 0.19);
                              --ha-card-border-color: rgba(0,0,0,0);
                            }
                      - type: button
                        tap_action:
                          action: navigate
                          navigation_path: camera
                        show_name: true
                        show_icon: false
                        name: Camera
                        card_mod:
                          style: |
                            ha-card {
                              font-weight: bold;
                              height: 100% !important;
                              background-color:rgba(115, 125, 140, 0.5);
                              box-shadow: 0 4px 8px 0 rgba(0, 0, 0, 0.2), 0 6px 20px 0 rgba(0, 0, 0, 0.19);
                              --ha-card-border-color: rgba(0,0,0,0);
                            }
                      - type: button
                        tap_action:
                          action: navigate
                          navigation_path: garden
                        show_name: true
                        show_icon: false
                        name: Garden
                        card_mod:
                          style: |
                            ha-card {
                              font-weight: bold;
                              height: 100% !important;
                              background-color:rgba(115, 125, 140, 0.5);
                              box-shadow: 0 4px 8px 0 rgba(0, 0, 0, 0.2), 0 6px 20px 0 rgba(0, 0, 0, 0.19);
                              --ha-card-border-color: rgba(0,0,0,0);
                            }
                      - type: button
                        tap_action:
                          action: navigate
                          navigation_path: media
                        show_name: true
                        show_icon: false
                        name: Media
                        card_mod:
                          style: |
                            ha-card {
                              font-weight: bold;
                              height: 100% !important;
                              background-color:rgba(115, 125, 140, 0.7);
                              box-shadow: 0 4px 8px 0 rgba(0, 0, 0, 0.2), 0 6px 20px 0 rgba(0, 0, 0, 0.19);
                              --ha-card-border-color: rgba(0,0,0,0);
                            }
                      - type: button
                        tap_action:
                          action: navigate
                          navigation_path: system
                        show_name: true
                        show_icon: false
                        name: System
                        card_mod:
                          style: |
                            ha-card {
                              font-weight: bold;
                              height: 100% !important;
                              background-color:rgba(115, 125, 140, 0.5);
                              box-shadow: 0 4px 8px 0 rgba(0, 0, 0, 0.2), 0 6px 20px 0 rgba(0, 0, 0, 0.19);
                              --ha-card-border-color: rgba(0,0,0,0);
                            }
              - type: custom:stack-in-card
                card_mod:
                  style: |
                    ha-card {
                      background-color: #000066;
                      border-style: solid;
                      border-width: 0px;
                      border-radius: 20px;
                      height: 615px;
                    }
                keep:
                  background: true
                  box_shadow: true
                  margin: true
                  outer_padding: true
                  border_radius: true
                cards:
                  - type: grid
                    cards:
                      - type: custom:homekit-card
                        style: |
                          .row {
                            padding-top: 0px !important; 
                              }
                          :host {
                          --tile-background: rgba(48, 167, 205, 91%);
                          --tile-border-radius: 12px;
                          --tile-width: 100px;
                          --tile-height: 100px;
                          --tile-on-background: rgba(196, 205, 48, 91%);
                          --tile-name-text-color: var(--text-color);
                          --tile-on-name-text-color: var(--text-medium-color);
                          --tile-state-text-color: var(--text-light-color);
                          --tile-on-state-text-color: var(--text-medium-color);
                          --tile-state-changed-text-color: var(--text-color);
                          --tile-unavailable-state-text-color: var(--disabled-text-color);
                          --tile-value-text-color: var(--text-color);
                          --tile-icon-color: rgba(0, 0, 0, 54%);
                          --tile-on-icon-color: var(--accent-color);
                          --tile-width-mobile: 90px;
                          --tile-height-mobile: 90px;
                          --min-header-height: 0px;
                          --tile-icon-size: 40px;
                          --tile-image-radius: 100%
                          --slider-width: 120px;
                          --slider-height: 120px;
                          }
                        home: false
                        useBrightness: true
                        horizontalScroll: true
                        useTemperature: false
                        useRGB: true
                        titleColor: var(--text-medium-color)
                        enableColumns: true
                        statePositionTop: true
                        masonry: true
                        rows:
                          - row: 1
                            columns:
                              - column: 1
                                tileOnRow: 8
                                entities:
                                  - title: 'Players'
                                    entities:
                                      - entity: media_player.family_room_tv
                                        name: Television
                                        icon: mdi:television
                                      - entity: media_player.kitchen_display
                                        name: Google Hub
                                      - entity: media_player.googlehome0625
                                        name: Google Home
                                      - entity: media_player.familyroom_speaker
                                        name: Soundbar
                                      - entity: media_player.bedroom_tv
                                        name: Chormecast
                                      - entity: media_player.lenovosmartclock8576
                                        name: Lenovo Clock
                    columns: 1
                    square: false

            view_layout:
              grid-area: main
          - type: vertical-stack
            cards:
              - type: custom:stack-in-card
                card_mod:
                  style: |
                    ha-card {
                      background-color: #000066;
                      border-style: solid;
                      border-width: 0px;
                      border-radius: 20px;
                      height: 163px;
                      --ha-card-border-color: rgba(0,0,0,0);
                      --ha-card-box-shadow: rgba(0,0,0,0);
                    }
                keep:
                  background: true
                  box_shadow: true
                  margin: true
                  outer_padding: true
                  border_radius: true
                cards:
                  - type: custom:gap-card
                    height: 10
                    size: null
                  - type: horizontal-stack
                    card_mod:  
                      style: |
                        ha-card {
                          height: 100% !important;
                          background: none;
                          box-shadow: none;
                          border-color: #000066;
                          --ha-card-box-shadow: rgba(0,0,0,0);
                          margin: auto;
                        }
                    cards:
                      - type: 'custom:button-card'
                        size: 70%
                        show_name: false
                        icon: mdi:cctv
                        styles:
                          icon:
                            - color: rgb(0, 179, 134)
                        tap_action:
                          action: fire-dom-event
                          browser_mod:
                            command: call-service
                            service: browser_mod.popup
                            data:      
                              browser_id: THIS                    
                              size: fullscreen
                              autoclose: true
                              timeout: 60000
                              content:
                                type: grid
                                cards:
                                  - type: picture-entity
                                    entity: camera.driveway
                                    show_name: false
                                    show_state: false
                                    camera_view: live
                                    camera_image: camera.driveway
                                  - type: picture-entity
                                    entity: camera.front_porch
                                    show_name: false
                                    show_state: false
                                    camera_view: live
                                    camera_image: camera.front_porch
                                  - type: picture-entity
                                    entity: camera.side_entrance
                                    show_name: false
                                    show_state: false
                                    camera_view: live
                                    camera_image: camera.side_entrance
                                  - type: picture-entity
                                    entity: camera.backyard
                                    show_name: false
                                    show_state: false
                                    camera_view: live
                                    camera_image: camera.backyard
                                columns: 2
                                square: false
                              card_mod:
                                style:
                                  .: |
                                    :host {
                                      --ha-card-background: #000066;
                                      --ha-card-border-color: #000066;
                                      --ha-card-box-shadow: rgba(0,0,0,0);
                                      --mdc-dialog-scrim-color: rgba(255,255,255,0.5);
                                      --mdc-dialog-min-height: 0%;
                                      --mdc-dialog-min-width: 100%;
                                      --mdc-dialog-max-width: 100%;      
                                      --mdc-button.background-color: rgb(255, 173, 51);                                
                                    }
                        card_mod:
                          style: |
                            ha-card {
                              max-width: 130px;
                              height: 100% !important;
                              background-color:rgba(115, 125, 140, 0);
                              border-color: #000066;
                              margin-left: auto;
                              margin-right: auto;
                              --ha-card-box-shadow: rgba(0,0,0,0); 
                            }
                      - type: 'custom:button-card'
                        size: 60%
                        show_name: false
                        icon: mdi:car
                        styles:
                          icon:
                            - color: rgb(0, 179, 134)
                        tap_action:
                          action: fire-dom-event
                          browser_mod:
                            command: call-service
                            service: browser_mod.popup
                            data:      
                              browser_id: THIS                    
                              content:
                                type: picture-elements
                                image: /local/tileboard/images/RRS_HST2.jpg
                                style: |
                                  #root > hui-image {
                                    display: block;
                                    width: 100%;
                                    top: 10px;
                                    padding: 0px 0px 30px 0px;
                                    margin: auto;
                                  }
                                elements:
                                  - type: image
                                    image: /local/tileboard/images/bg2h.png
                                    style:
                                      left: 50%
                                      top: 90%
                                      width: 100%
                                      height: 60px
                                  - type: state-icon
                                    entity: lock.2020_range_rover_sport_doors
                                    tap_action:
                                      action: more-info
                                    style:
                                      color: white
                                      left: 15%
                                      top: 86%
                                  - type: state-label
                                    entity: lock.2020_range_rover_sport_doors
                                    style:
                                      color: white
                                      left: 15%
                                      top: 95%
                                  - type: state-icon
                                    entity: sensor.2020_range_rover_sport_windows
                                    tap_action:
                                      action: more-info
                                    style:
                                      color: white
                                      left: 38.3%
                                      top: 86%
                                  - type: state-label
                                    entity: sensor.2020_range_rover_sport_windows
                                    style:
                                      color: white
                                      left: 38.3%
                                      top: 95%
                                  - type: state-icon
                                    entity: sensor.2020_range_rover_sport_range
                                    tap_action:
                                      action: more-info
                                    style:
                                      color: white
                                      left: 61.6%
                                      top: 86%
                                  - type: state-label
                                    entity: sensor.2020_range_rover_sport_range
                                    style:
                                      color: white
                                      left: 61.6%
                                      top: 95%
                                  - type: state-icon
                                    entity: sensor.2020_range_rover_sport_info
                                    tap_action:
                                      action: more-info
                                    style:
                                      color: white
                                      left: 85%
                                      top: 86%
                                  - type: state-label
                                    entity: sensor.2020_range_rover_sport_info
                                    attribute: Odometer
                                    style:
                                      color: white
                                      left: 85%
                                      top: 95%
                        card_mod:
                          style: |
                            ha-card {
                              max-width: 130px;
                              height: 100% !important;
                              background-color:rgba(115, 125, 140, 0);
                              border-color: #000066;
                              margin-left: auto;
                              margin-right: auto;
                              --ha-card-box-shadow: rgba(0,0,0,0);
                            }

              - type: custom:stack-in-card
                card_mod:
                  style: |
                    ha-card {
                      background-color: #000066;
                      border-style: solid;
                      border-width: 0px;
                      border-radius: 20px;
                      height: 615px;
                      --ha-card-border-color: rgba(0,0,0,0);
                      --ha-card-box-shadow: rgba(0,0,0,0);
                    }
                keep:
                  background: true
                  box_shadow: true
                  margin: true
                  outer_padding: true
                  border_radius: true
                cards:
                  - type: horizontal-stack
                    card_mod:  
                      style: |
                        ha-card {
                          height: 100% !important;
                          background: none;
                          box-shadow: none;
                        }
                    cards:
                      - type: 'custom:button-card'
                        entity: cover.double
                        size: 90%
                        show_name: false
                        icon: >
                                [[[
                                  if (entity.state == 'open') return 'mdi:garage-open';
                                  if (entity.state == 'closed') return 'mdi:garage';
                                  else return 'mdi:garage-alert';
                                ]]]
                        styles:
                          icon:
                            - color: >
                                [[[
                                  if (entity.state == 'closed') return 'rgb(0, 179, 134)';
                                  if (entity.state == 'open') return 'rgb(255, 102, 102)';
                                  else return 'rgb(255, 173, 51)';
                                ]]]
                        card_mod:
                          style: |
                            ha-card {
                              max-width: 130px;
                              height: 100% !important;
                              background-color:rgba(115, 125, 140, 0);
                              border-color: #000066;
                              margin-left: auto;
                              margin-right: auto;
                              --ha-card-box-shadow: rgba(0,0,0,0); 
                            }
                      - type: 'custom:button-card'
                        entity: cover.single
                        size: 90%
                        show_name: false
                        icon: >
                                [[[
                                  if (entity.state == 'open') return 'mdi:garage-open';
                                  if (entity.state == 'closed') return 'mdi:garage';
                                  else return 'mdi:garage-alert';
                                ]]]
                        styles:
                          icon:
                            - color: >
                                [[[
                                  if (entity.state == 'closed') return 'rgb(0, 179, 134)';
                                  if (entity.state == 'open') return 'rgb(255, 102, 102)';
                                  else return 'rgb(255, 173, 51)';
                                ]]]
                        card_mod:
                          style: |
                            ha-card {
                              max-width: 130px;
                              height: 100% !important;
                              background-color:rgba(115, 125, 140, 0);
                              border-color: #000066;
                              margin-left: auto;
                              margin-right: auto;
                              --ha-card-box-shadow: rgba(0,0,0,0);
                            }
                  - type: horizontal-stack
                    card_mod:  
                      style: |
                        ha-card {
                          height: 100% !important;
                          background: none;
                          box-shadow: none;
                        }
                    cards:
                      - type: 'custom:button-card'
                        size: 70%
                        name: System
                        show_name: false
                        icon: >
                                [[[
                                  
                                  if (states['alarm_control_panel.home_alarm'].state == 'disarmed') return 'mdi:security';

                                  if (states['alarm_control_panel.home_alarm'].state == 'armed_home') return 'mdi:shield-home';
                                  if (states['alarm_control_panel.home_alarm'].state == 'armed_away') return 'mdi:shield-airplane';
                                  if (states['alarm_control_panel.home_alarm'].state == 'triggered') return 'mdi:shield-alert';
                                  if (states['alarm_control_panel.home_alarm'].state == 'pending') return 'mdi:security';
                                  else return 'mdi:shield-off';
                                ]]] 
                        styles:
                          icon:
                            - color: >
                                [[[
                                  if (states['alarm_control_panel.home_alarm'].state == 'disarmed' && states['sensor.home_alarm_keypad'].state != 'Not Ready' ) return 'rgb(0, 179, 134)';
                                  if (states['alarm_control_panel.home_alarm'].state == 'disarmed' && states['sensor.home_alarm_keypad'].state == 'Not Ready' ) return 'rgb(255, 173, 51)';
                                  if (states['alarm_control_panel.home_alarm'].state == 'armed_home') return 'rgb(255, 102, 102)';
                                  if (states['alarm_control_panel.home_alarm'].state == 'armed_away') return 'rgb(255, 102, 102)';
                                  if (states['alarm_control_panel.home_alarm'].state == 'triggered') return 'rgb(255, 102, 102)';
                                  else return 'rgb(255, 173, 51)';
                                ]]]
                          card:
                            - animation: >
                                [[[
                                  if (states['alarm_control_panel.home_alarm'].state == 'pending')  return 'blink 2s ease infinite';
                                ]]]
                        tap_action:
                          action: fire-dom-event
                          browser_mod:
                            command: call-service
                            service: browser_mod.popup
                            data:      
                              browser_id: THIS                    
                              content:
                                type: alarm-panel
                                entity: alarm_control_panel.home_alarm
                              card_mod:
                                style:
                                  .: |
                                    :host {
                                      --ha-card-background: #000066;
                                      --ha-card-border-color: #000066;
                                      --ha-card-box-shadow: rgba(0,0,0,0);
                                      --mdc-dialog-scrim-color: rgba(255,255,255,0.5);
                                      --mdc-dialog-min-height: 0%;
                                      --mdc-dialog-min-width: 100%;
                                      --mdc-dialog-max-width: 100%;      
                                      --mdc-button.background-color: rgb(255, 173, 51);                                
                                    }
                        card_mod:
                          style: |
                            ha-card {
                              max-width: 130px;
                              height: 100% !important;
                              background-color:rgba(115, 125, 140, 0);
                              border-color: #000066;
                              margin-left: auto;
                              margin-right: auto;
                              --ha-card-box-shadow: rgba(0,0,0,0);
                            }
                      - type: 'custom:button-card'
                        entity: lock.front_door
                        size: 70%
                        show_name: false
                        icon: >
                                [[[
                                  if (entity.state == 'locked') return 'mdi:lock';
                                  if (entity.state == 'locked') return 'mdi:lock-alert';
                                  if (entity.state == 'unlocked') return 'mdi:lock-open';
                                  if (entity.state == 'unlocked') return 'mdi:lock-open-alert';
                                  else return 'mdi:lock-off';
                                ]]]
                        styles:
                          icon:
                            - color: >
                                [[[
                                  if (entity.state == 'locked') return 'rgb(0, 179, 134)';
                                  if (entity.state == 'locked') return 'rgb(255, 102, 102)';
                                  if (entity.state == 'unlocked') return 'rgb(255, 102, 102)';
                                  if (entity.state == 'unlocked') return 'rgb(255, 102, 102)';
                                  else return 'rgb(255, 173, 51)';
                                ]]]
                       #   grid:
                        #    - position: relative
                         # custom_fields:
                          #  notification:
                           #   - border-radius: 50%
                            #  - position: absolute
                             # - left: 70%
                             # - top: 10%
                              #- height: 25px
                              #- width: 25px
                              #- font-size: 12px
                              #- font-weight: bold
                              #- line-height: 20px
                       # custom_fields:
                        #  notification: >
                         #   [[[ return states['sensor.front_door_battery'].state + "%" ]]]
                        card_mod:
                          style: |
                            ha-card {
                              max-width: 130px;
                              height: 100% !important;
                              background-color:rgba(115, 125, 140, 0);
                              border-color: #000066;
                              margin-left: auto;
                              margin-right: auto;
                              --ha-card-box-shadow: rgba(0,0,0,0);
                            }

                  - type: horizontal-stack
                    card_mod:  
                      style: |
                        ha-card {
                          height: 100% !important;
                          background: none;
                          box-shadow: none;
                        }
                    cards:
                      - type: 'custom:button-card'
                        entity: binary_sensor.doors
                        size: 70%
                        show_name: false
                        icon: >
                                [[[
                                  if (entity.state == 'off') return 'mdi:door';
                                  if (entity.state == 'on') return 'mdi:door-open';
                                  else return 'mdi:door';
                                ]]]
                        styles:
                          icon:
                            - color: >
                                [[[
                                  if (entity.state == 'off') return 'rgb(0, 179, 134)';
                                  if (entity.state == 'on') return 'rgb(255, 102, 102)';
                                  else return 'rgb(169,169,169)';
                                ]]]
                          card:
                            - animation: >
                                [[[
                                  if (entity.state == 'on')  return 'blink 2s ease infinite';
                                ]]]
                        card_mod:
                          style: |
                            ha-card {
                              max-width: 130px;
                              height: 100% !important;
                              background-color:rgba(115, 125, 140, 0);
                              border-color: #000066;
                              margin-left: auto;
                              margin-right: auto;
                              --ha-card-box-shadow: rgba(0,0,0,0); 
                            }
                      - type: 'custom:button-card'
                        entity: binary_sensor.windows
                        size: 60%
                        show_name: false
                        icon: >
                                [[[
                                  if (entity.state == 'off') return 'mdi:window-closed-variant';
                                  if (entity.state == 'on') return 'mdi:window-open-variant';
                                  else return 'mdi:window-closed-variant';
                                ]]]
                        styles:
                          icon:
                            - color: >
                                [[[
                                  if (entity.state == 'off') return 'rgb(0, 179, 134)';
                                  if (entity.state == 'on') return 'rgb(255, 102, 102)';
                                  else return 'rgb(169,169,169)';
                                ]]]
                          card:
                            - animation: >
                                [[[
                                  if (entity.state == 'on')  return 'blink 2s ease infinite';
                                ]]]
                        card_mod:
                          style: |
                            ha-card {
                              max-width: 130px;
                              height: 100% !important;
                              background-color:rgba(115, 125, 140, 0);
                              border-color: #000066;
                              margin-left: auto;
                              margin-right: auto;
                              --ha-card-box-shadow: rgba(0,0,0,0);
                            }
                  - type: horizontal-stack
                    card_mod:  
                      style: |
                        ha-card {
                          height: 100% !important;
                          background: none;
                          box-shadow: none;
                        }
                    cards:
                      - type: 'custom:button-card'
                        entity: sensor.hvac_state
                        size: 70%
                        show_name: false
                        show_state: false
                        icon: mdi:fan
                        tap_action:
                          entity: climate.nest
                          action: more-info
                        state:
                          - value: 'Heat'
                            spin: true
                          - value: 'Cool'
                            spin: true
                        styles:
                          icon:
                            - color: >
                                [[[
                                  if (entity.state == 'Idle') return 'rgb(0, 179, 134)';
                                  if (entity.state == 'Heat') return 'rgb(255, 173, 51)';
                                  if (entity.state == 'Cool') return 'rgb(16, 137, 243)';
                                  else return 'rgb(169,169,169)';
                                ]]]
                          card:
                            - animation: >
                                [[[
                                  if (entity.state == 'unknown')  return 'blink 2s ease infinite';
                                ]]]
                        card_mod:
                          style: |
                            ha-card {
                              max-width: 130px;
                              height: 100% !important;
                              background-color:rgba(115, 125, 140, 0);
                              border-color: #000066;
                              margin-left: auto;
                              margin-right: auto;
                              --ha-card-box-shadow: rgba(0,0,0,0); 
                            }
                      - type: 'custom:button-card'
                        entity: switch.television
                        size: 70%
                        show_name: false
                        tap_action:
                          action: toggle
                        icon: >
                                [[[
                                  if (entity.state == 'off') return 'mdi:television-off';
                                  if (entity.state == 'on') return 'mdi:television-play';
                                  else return 'mdi:television';
                                ]]]
                        styles:
                          icon:
                            - color: >
                                [[[
                                  if (entity.state == 'off') return 'rgb(0, 179, 134)';
                                  if (entity.state == 'on') return 'rgb(196, 205, 48)';
                                  else return 'rgb(255, 173, 51)';
                                ]]]
                        card_mod:
                          style: |
                            ha-card {
                              max-width: 130px;
                              height: 100% !important;
                              background-color:rgba(115, 125, 140, 0);
                              border-color: #000066;
                              margin-left: auto;
                              margin-right: auto;
                              --ha-card-box-shadow: rgba(0,0,0,0);
                            }
                  - type: horizontal-stack
                    card_mod:  
                      style: |
                        ha-card {
                          height: 100% !important;
                          background: none;
                          box-shadow: none;
                        }
                    cards:
                      - type: 'custom:button-card'
                        entity: binary_sensor.internet 
                        size: 70%
                        show_name: false
                        icon: >
                                [[[
                                  if (entity.state == 'on') return 'mdi:check-network';
                                  if (entity.state == 'off') return 'mdi:close-network';
                                  else return 'mdi:server-network';
                                ]]]
                        styles:
                          icon:
                            - color: >
                                [[[
                                  if (entity.state == 'on') return 'rgb(0, 179, 134)';
                                  if (entity.state == 'off') return 'rgb(255, 102, 102)';
                                  else return 'rgb(169,169,169)';
                                ]]]
                          card:
                            - animation: >
                                [[[
                                  if (entity.state == 'off')  return 'blink 2s ease infinite';
                                ]]]
                        card_mod:
                          style: |
                            ha-card {
                              max-width: 130px;
                              height: 100% !important;
                              background-color:rgba(115, 125, 140, 0);
                              border-color: #000066;
                              margin-left: auto;
                              margin-right: auto;
                              --ha-card-box-shadow: rgba(0,0,0,0); 
                            }
                      - type: 'custom:button-card'
                        entity: switch.bell_disable
                        hold_action:
                          action: toggle
                        size: 70%
                        show_name: false
                        icon: >
                                [[[
                                  if (entity.state == 'on') return 'mdi:bell-off';
                                  if (entity.state == 'off') return 'mdi:bell-ring';
                                  else return 'mdi:bell';
                                ]]]
                        styles:
                          icon:
                            - color: >
                                [[[
                                  if (entity.state == 'off') return 'rgb(0, 179, 134)';
                                  if (entity.state == 'on') return 'rgb(255, 102, 102)';
                                  else return 'rgb(169,169,169)';
                                ]]]
                        card_mod:
                          style: |
                            ha-card {
                              max-width: 130px;
                              height: 100% !important;
                              background-color:rgba(115, 125, 140, 0);
                              border-color: #000066;
                              margin-left: auto;
                              margin-right: auto;
                              --ha-card-box-shadow: rgba(0,0,0,0); 
                            }
            view_layout:
              grid-area: sidebar
  - title: System
    path: system
    icon: ''
    theme: clear-dark
    type: panel
    layout: {}
    badges: []
    cards:
      - type: custom:layout-card
        layout_type: custom:grid-layout
        layout:
          grid-template-columns: auto 0.01px 25%
          grid-template-rows: auto
          grid-template-areas: |
            "main . sidebar"
        cards:
          - type: vertical-stack
            cards:
              - type: custom:stack-in-card
                card_mod:
                  style: |
                    ha-card {
                      background: linear-gradient(to top, #000066 0%, #660066 100%);
                      border-style: solid;
                      border-width: 0px;
                      border-radius: 20px;
                      --ha-card-border-color: rgba(0,0,0,0);
                    }
                keep:
                  background: true
                  box_shadow: true
                  margin: true
                  outer_padding: true
                  border_radius: true
                cards:
                  - type: markdown
                    style:
                      .: |
                        ha-markdown.no-header {
                          padding-top: 0px !important; 
                          }
                        ha-markdown {
                          padding: 0px 0px 0px !important; 
                          }
                        ha-card {
                          border-radius: 20px;
                          overflow: hidden;
                          margin: 0 auto;

                          background: none;
                          box-shadow: none;

                        }
                      ha-markdown:
                        $: |
                          td, th {
                            word-wrap: break-word;
                            border-spacing: 0px;
                            
                                margin-left:auto; 
                                margin-right:auto;

                          }
                          table {
                            border-spacing: 0px;
                                margin-left:auto; 
                                margin-right:auto;
                          }
                    content: >-
                      <table >
                        <tr>
                          <td width="10%" ><img src="/local/tileboard/images/HA2.png" alt="" border=3 height=90 width=100 ></img></td>
                          <td width="85%"><font size=5><b>{{now().strftime("%I:%M %p")}}</b></font><br><font size=3> {{now().strftime("%A")}}, {{now().strftime("%B %-d")}} </font></td>
                          <td><font size=6><b>{{state_attr("weather.home_assistant", "temperature")}}Â°C</b></font><br><font size=4>{{states.weather.home_assistant.state}}  </font></td>
                        </tr>
                      </table>

                      
                  - type: horizontal-stack
                    card_mod:  
                      style: |
                        ha-card {
                          height: 100% !important;
                          background: none;
                          box-shadow: none;
                          
                        }
                    cards:
                      - type: button
                        tap_action:
                          action: navigate
                          navigation_path: home
                        show_name: true
                        show_icon: false
                        name: Home
                        card_mod:
                          style: |
                            ha-card {
                              font-weight: bold;
                              height: 100% !important;
                              background-color:rgba(115, 125, 140, 0.5);
                              box-shadow: 0 4px 8px 0 rgba(0, 0, 0, 0.2), 0 6px 20px 0 rgba(0, 0, 0, 0.19);
                              --ha-card-border-color: rgba(0,0,0,0);
                            }
                      - type: button
                        tap_action:
                          action: navigate
                          navigation_path: camera
                        show_name: true
                        show_icon: false
                        name: Camera
                        card_mod:
                          style: |
                            ha-card {
                              font-weight: bold;
                              height: 100% !important;
                              background-color:rgba(115, 125, 140, 0.5);
                              box-shadow: 0 4px 8px 0 rgba(0, 0, 0, 0.2), 0 6px 20px 0 rgba(0, 0, 0, 0.19);
                              --ha-card-border-color: rgba(0,0,0,0);
                            }
                      - type: button
                        tap_action:
                          action: navigate
                          navigation_path: garden
                        show_name: true
                        show_icon: false
                        name: Garden
                        card_mod:
                          style: |
                            ha-card {
                              font-weight: bold;
                              height: 100% !important;
                              background-color:rgba(115, 125, 140, 0.5);
                              box-shadow: 0 4px 8px 0 rgba(0, 0, 0, 0.2), 0 6px 20px 0 rgba(0, 0, 0, 0.19);
                              --ha-card-border-color: rgba(0,0,0,0);
                            }
                      - type: button
                        tap_action:
                          action: navigate
                          navigation_path: media
                        show_name: true
                        show_icon: false
                        name: Media
                        card_mod:
                          style: |
                            ha-card {
                              font-weight: bold;
                              height: 100% !important;
                              background-color:rgba(115, 125, 140, 0.5);
                              box-shadow: 0 4px 8px 0 rgba(0, 0, 0, 0.2), 0 6px 20px 0 rgba(0, 0, 0, 0.19);
                              --ha-card-border-color: rgba(0,0,0,0);
                            }
                      - type: button
                        tap_action:
                          action: navigate
                          navigation_path: system
                        show_name: true
                        show_icon: false
                        name: System
                        card_mod:
                          style: |
                            ha-card {
                              font-weight: bold;
                              height: 100% !important;
                              background-color:rgba(115, 125, 140, 0.7);
                              box-shadow: 0 4px 8px 0 rgba(0, 0, 0, 0.2), 0 6px 20px 0 rgba(0, 0, 0, 0.19);
                              --ha-card-border-color: rgba(0,0,0,0);
                            }
              - type: custom:stack-in-card
                card_mod:
                  style: |
                    ha-card {
                      background-color: #000066;
                      border-style: solid;
                      border-width: 0px;
                      border-radius: 20px;
                      height: 615px;
                    }
                keep:
                  background: true
                  box_shadow: true
                  margin: true
                  outer_padding: true
                  border_radius: true
                cards:

                  - type: grid
                    cards:
                      - type: custom:mini-graph-card
                        card_mod:
                          style: |
                            ha-card {
                              height: 100% !important;
                              background: none;
                              box-shadow: none;
                              --ha-card-border-color: rgba(0,0,0,0);
                            }
                        entities:
                          - entity: sensor.processor_use
                            name: 'CPU'
                        show:
                          labels: true
                          points: false
                          icon_adaptive_color: true
                        color_thresholds:
                          - value: 59
                            color: "#009900"
                          - value: 60
                            color: "#FF9900"
                          - value: 85
                            color: "#FF0000"
                      - type: custom:mini-graph-card
                        card_mod:
                          style: |
                            ha-card {
                              height: 100% !important;
                              background: none;
                              box-shadow: none;
                              --ha-card-border-color: rgba(0,0,0,0);
                            }
                        entities:
                          - entity: sensor.memory_use_percent
                            name: 'Memory'
                        show:
                          labels: true
                          points: false
                          icon_adaptive_color: true
                        color_thresholds:
                          - value: 59
                            color: "#009900"
                          - value: 60
                            color: "#FF9900"
                          - value: 85
                            color: "#FF0000"
                      - type: custom:mini-graph-card
                        card_mod:
                          style: |
                            ha-card {
                              height: 100% !important;
                              background: none;
                              box-shadow: none;
                              --ha-card-border-color: rgba(0,0,0,0);
                            }
                        entities:
                          - entity: sensor.disk_use_percent_home
                            name: 'Storage'
                        show:
                          labels: true
                          points: false
                          icon_adaptive_color: true
                        color_thresholds:
                          - value: 59
                            color: "#009900"
                          - value: 60
                            color: "#FF9900"
                          - value: 85
                            color: "#FF0000"
                      - type: custom:mini-graph-card
                        card_mod:
                          style: |
                            ha-card {
                              height: 100% !important;
                              background: none;
                              box-shadow: none;
                              --ha-card-border-color: rgba(0,0,0,0);
                            }
                        entities:
                          - entity: sensor.cpu_temperature
                            name: 'Temperature'
                        show:
                          labels: true
                          points: false
                          icon_adaptive_color: true
                        color_thresholds:
                          - value: 45
                            color: '#f39c12'
                          - value: 55
                            color: '#d35400'
                          - value: 65
                            color: '#c0392b'
                      - type: custom:mini-graph-card
                        card_mod:
                          style: |
                            ha-card {
                              height: 100% !important;
                              background: none;
                              box-shadow: none;
                              border-radius: 0px;
                              --ha-card-border-color: rgba(0,0,0,0);
                            }
                        entities:
                          - entity: sensor.pi_hole_dns_queries_today
                        name: 'PiHole - DNS Requests'
                        hours_to_show: 24
                        aggregate_func: max
                        group_by: hour
                        show:
                          graph: bar
                    columns: 4
                    square: false
                  - type: custom:gap-card
                    height: 10
                    size: null
            view_layout:
              grid-area: main
          - type: vertical-stack
            cards:
              - type: custom:stack-in-card
                card_mod:
                  style: |
                    ha-card {
                      background-color: #000066;
                      border-style: solid;
                      border-width: 0px;
                      border-radius: 20px;
                      height: 163px;
                      --ha-card-border-color: rgba(0,0,0,0);
                      --ha-card-box-shadow: rgba(0,0,0,0);
                    }
                keep:
                  background: true
                  box_shadow: true
                  margin: true
                  outer_padding: true
                  border_radius: true
                cards:
                  - type: custom:gap-card
                    height: 10
                    size: null
                  - type: horizontal-stack
                    card_mod:  
                      style: |
                        ha-card {
                          height: 100% !important;
                          background: none;
                          box-shadow: none;
                          border-color: #000066;
                          --ha-card-box-shadow: rgba(0,0,0,0);
                          margin: auto;
                        }
                    cards:
                      - type: 'custom:button-card'
                        entity: binary_sensor.rpi_power_status
                        size: 70%
                        show_name: false
                        styles:
                          icon:
                            - color: >
                                [[[
                                  if (entity.state == 'off') return 'rgb(0, 179, 134)';
                                  if (entity.state == 'on') return 'rgb(255, 102, 102)';
                                  else return 'rgb(255, 173, 51)';
                                ]]]
                        tap_action:
                          action: none
                        card_mod:
                          style: |
                            ha-card {
                              max-width: 130px;
                              height: 100% !important;
                              background-color:rgba(115, 125, 140, 0);
                              border-color: #000066;
                              margin-left: auto;
                              margin-right: auto;
                              --ha-card-box-shadow: rgba(0,0,0,0); 
                            }
                      - type: 'custom:button-card'
                        entity: binary_sensor.pi_hole
                        size: 70%
                        show_name: false
                        styles:
                          icon:
                            - color: >
                                [[[
                                  if (entity.state == 'on') return 'rgb(0, 179, 134)';
                                  if (entity.state == 'off') return 'rgb(255, 102, 102)';
                                  else return 'rgb(255, 173, 51)';
                                ]]]
                        tap_action:
                          action: none
                        card_mod:
                          style: |
                            ha-card {
                              max-width: 130px;
                              height: 100% !important;
                              background-color:rgba(115, 125, 140, 0);
                              border-color: #000066;
                              margin-left: auto;
                              margin-right: auto;
                              --ha-card-box-shadow: rgba(0,0,0,0);
                            }

              - type: custom:stack-in-card
                card_mod:
                  style: |
                    ha-card {
                      background-color: #000066;
                      border-style: solid;
                      border-width: 0px;
                      border-radius: 20px;
                      height: 615px;
                      --ha-card-border-color: rgba(0,0,0,0);
                      --ha-card-box-shadow: rgba(0,0,0,0);
                    }
                keep:
                  background: true
                  box_shadow: true
                  margin: true
                  outer_padding: true
                  border_radius: true
                cards:
                  - type: horizontal-stack
                    card_mod:  
                      style: |
                        ha-card {
                          height: 100% !important;
                          background: none;
                          box-shadow: none;
                        }
                    cards:
                      - type: 'custom:button-card'
                        entity: input_boolean.ha_backup_switch
                        icon: mdi:cloud-upload
                        size: 70%
                        show_name: false
                        styles:
                          icon:
                            - color: >
                                [[[
                                  if (entity.state == 'on') return 'rgb(0, 179, 134)';
                                  if (entity.state == 'off') return 'rgb(255, 102, 102)';
                                  else return 'rgb(255, 173, 51)';
                                ]]]
                        card_mod:
                          style: |
                            ha-card {
                              max-width: 130px;
                              height: 100% !important;
                              background-color:rgba(115, 125, 140, 0);
                              border-color: #000066;
                              margin-left: auto;
                              margin-right: auto;
                              --ha-card-box-shadow: rgba(0,0,0,0); 
                            }
                      - type: 'custom:button-card'
                        entity: input_boolean.tileboard_notification
                        icon: mdi:bullhorn
                        size: 70%
                        show_name: false
                        styles:
                          icon:
                            - color: >
                                [[[
                                  if (entity.state == 'on') return 'rgb(0, 179, 134)';
                                  if (entity.state == 'off') return 'rgb(255, 102, 102)';
                                  else return 'rgb(255, 173, 51)';
                                ]]]
                        card_mod:
                          style: |
                            ha-card {
                              max-width: 130px;
                              height: 100% !important;
                              background-color:rgba(115, 125, 140, 0);
                              border-color: #000066;
                              margin-left: auto;
                              margin-right: auto;
                              --ha-card-box-shadow: rgba(0,0,0,0);
                            }
                  - type: horizontal-stack
                    card_mod:  
                      style: |
                        ha-card {
                          height: 100% !important;
                          background: none;
                          box-shadow: none;
                        }
                    cards:
                      - type: 'custom:button-card'
                        entity: update.home_assistant_core_update
                        size: 70%
                        name: System
                        show_name: false
                        icon: mdi:home-assistant
                        styles:
                          icon:
                            - color: > 
                                [[[
                                  if (entity.state == 'on') return 'rgb(196, 205, 48)';
                                  if (entity.state == 'off') return 'rgb(0, 179, 134)';
                                  else return 'rgb(255, 173, 51)';
                                ]]]
                          card:
                            - animation: >
                                [[[
                                  if (entity.state == 'on')  return 'blink 2s ease infinite';
                                ]]]
                        tap_action:
                          action: none
                        card_mod:
                          style: |
                            ha-card {
                              max-width: 130px;
                              height: 100% !important;
                              background-color:rgba(115, 125, 140, 0);
                              border-color: #000066;
                              margin-left: auto;
                              margin-right: auto;
                              --ha-card-box-shadow: rgba(0,0,0,0);
                            }
                      - type: 'custom:button-card'
                        entity: update.home_assistant_operating_system_update
                        size: 70%
                        name: System
                        show_name: false
                        icon: mdi:alert-decagram
                        styles:
                          icon:
                            - color: > 
                                [[[
                                  if (entity.state == 'on') return 'rgb(196, 205, 48)';
                                  if (entity.state == 'off') return 'rgb(0, 179, 134)';
                                  else return 'rgb(255, 173, 51)';
                                ]]]
                          card:
                            - animation: >
                                [[[
                                  if (entity.state == 'on')  return 'blink 2s ease infinite'; 
                                ]]]
                        tap_action:
                          action: none
                        card_mod:
                          style: |
                            ha-card {
                              max-width: 130px;
                              height: 100% !important;
                              background-color:rgba(115, 125, 140, 0);
                              border-color: #000066;
                              margin-left: auto;
                              margin-right: auto;
                              --ha-card-box-shadow: rgba(0,0,0,0);
                            }
                  - type: horizontal-stack
                    card_mod:  
                      style: |
                        ha-card {
                          height: 100% !important;
                          background: none;
                          box-shadow: none;
                        }
                    cards:
                      - type: 'custom:button-card'
                        entity: sensor.hacs
                        size: 70%
                        name: System
                        show_name: false
                        styles:
                          icon:
                            - color: > 
                                [[[
                                  if (entity.state > 0) return 'rgb(196, 205, 48)';
                                  else return 'rgb(0, 179, 134)';
                                ]]]
                          card:
                            - animation: >
                                [[[
                                  if (entity.state > 0)  return 'blink 2s ease infinite'; 
                                ]]]
                        tap_action:
                          action: none
                        card_mod:
                          style: |
                            ha-card {
                              max-width: 130px;
                              height: 100% !important;
                              background-color:rgba(115, 125, 140, 0);
                              border-color: #000066;
                              margin-left: auto;
                              margin-right: auto;
                              --ha-card-box-shadow: rgba(0,0,0,0);
                            }
                      - type: 'custom:button-card'
                        entity: binary_sensor.windows
                        size: 60%
                        show_name: false
                        icon: >
                                [[[
                                  if (entity.state == 'off') return 'mdi:window-closed-variant';
                                  if (entity.state == 'on') return 'mdi:window-open-variant';
                                  else return 'mdi:window-closed-variant';
                                ]]]
                        styles:
                          icon:
                            - color: >
                                [[[
                                  if (entity.state == 'off') return 'rgb(0, 179, 134)';
                                  if (entity.state == 'on') return 'rgb(255, 102, 102)';
                                  else return 'rgb(169,169,169)';
                                ]]]
                          card:
                            - animation: >
                                [[[
                                  if (entity.state == 'on')  return 'blink 2s ease infinite';
                                ]]]
                        card_mod:
                          style: |
                            ha-card {
                              max-width: 130px;
                              height: 100% !important;
                              background-color:rgba(115, 125, 140, 0);
                              border-color: #000066;
                              margin-left: auto;
                              margin-right: auto;
                              --ha-card-box-shadow: rgba(0,0,0,0);
                            }
                  - type: horizontal-stack
                    card_mod:  
                      style: |
                        ha-card {
                          height: 100% !important;
                          background: none;
                          box-shadow: none;
                        }
                    cards:
                      - type: 'custom:button-card'
                        entity: sensor.hvac_state
                        size: 70%
                        show_name: false
                        show_state: false
                        icon: mdi:fan
                        tap_action:
                          entity: climate.nest
                          action: more-info
                        state:
                          - value: 'Heat'
                            spin: true
                          - value: 'Cool'
                            spin: true
                        styles:
                          icon:
                            - color: >
                                [[[
                                  if (entity.state == 'Idle') return 'rgb(0, 179, 134)';
                                  if (entity.state == 'Heat') return 'rgb(255, 173, 51)';
                                  if (entity.state == 'Cool') return 'rgb(16, 137, 243)';
                                  else return 'rgb(169,169,169)';
                                ]]]
                          card:
                            - animation: >
                                [[[
                                  if (entity.state == 'unknown')  return 'blink 2s ease infinite';
                                ]]]
                        card_mod:
                          style: |
                            ha-card {
                              max-width: 130px;
                              height: 100% !important;
                              background-color:rgba(115, 125, 140, 0);
                              border-color: #000066;
                              margin-left: auto;
                              margin-right: auto;
                              --ha-card-box-shadow: rgba(0,0,0,0); 
                            }
                      - type: 'custom:button-card'
                        entity: switch.television
                        size: 70%
                        show_name: false
                        tap_action:
                          action: toggle
                        icon: >
                                [[[
                                  if (entity.state == 'off') return 'mdi:television-off';
                                  if (entity.state == 'on') return 'mdi:television-play';
                                  else return 'mdi:television';
                                ]]]
                        styles:
                          icon:
                            - color: >
                                [[[
                                  if (entity.state == 'off') return 'rgb(0, 179, 134)';
                                  if (entity.state == 'on') return 'rgb(196, 205, 48)';
                                  else return 'rgb(255, 173, 51)';
                                ]]]
                        card_mod:
                          style: |
                            ha-card {
                              max-width: 130px;
                              height: 100% !important;
                              background-color:rgba(115, 125, 140, 0);
                              border-color: #000066;
                              margin-left: auto;
                              margin-right: auto;
                              --ha-card-box-shadow: rgba(0,0,0,0);
                            }
                  - type: horizontal-stack
                    card_mod:  
                      style: |
                        ha-card {
                          height: 100% !important;
                          background: none;
                          box-shadow: none;
                        }
                    cards:
                      - type: 'custom:button-card'
                        entity: binary_sensor.internet 
                        size: 70%
                        show_name: false
                        icon: >
                                [[[
                                  if (entity.state == 'on') return 'mdi:check-network';
                                  if (entity.state == 'off') return 'mdi:close-network';
                                  else return 'mdi:server-network';
                                ]]]
                        styles:
                          icon:
                            - color: >
                                [[[
                                  if (entity.state == 'on') return 'rgb(0, 179, 134)';
                                  if (entity.state == 'off') return 'rgb(255, 102, 102)';
                                  else return 'rgb(169,169,169)';
                                ]]]
                          card:
                            - animation: >
                                [[[
                                  if (entity.state == 'off')  return 'blink 2s ease infinite'; 
                                ]]]
                        card_mod:
                          style: |
                            ha-card {
                              max-width: 130px;
                              height: 100% !important;
                              background-color:rgba(115, 125, 140, 0);
                              border-color: #000066;
                              margin-left: auto;
                              margin-right: auto;
                              --ha-card-box-shadow: rgba(0,0,0,0); 
                            }
                      - type: 'custom:button-card'
                        entity: binary_sensor.local_network
                        size: 70%
                        show_name: false
                        icon: mdi:router-network
                        styles:
                          icon:
                            - color: >
                                [[[
                                  if (entity.state == 'on') return 'rgb(0, 179, 134)';
                                  if (entity.state == 'off') return 'rgb(255, 102, 102)';
                                  else return 'rgb(169,169,169)';
                                ]]]
                          card:
                            - animation: >
                                [[[
                                  if (entity.state == 'off')  return 'blink 2s ease infinite'; 
                                ]]]
                        card_mod:
                          style: |
                            ha-card {
                              max-width: 130px;
                              height: 100% !important;
                              background-color:rgba(115, 125, 140, 0);
                              border-color: #000066;
                              margin-left: auto;
                              margin-right: auto;
                              --ha-card-box-shadow: rgba(0,0,0,0); 
                            }
            view_layout:
              grid-area: sidebar
